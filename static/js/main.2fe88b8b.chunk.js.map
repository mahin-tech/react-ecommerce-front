{"version":3,"sources":["images/laptop.png","components/drawer/SideDrawer.js","components/forms/Search.js","components/nav/Header.js","components/routes/LoadingToRedirect.js","components/routes/UserRoute.js","functions/auth.js","components/routes/AdminRoute.js","components/cards/Jumbotron.js","functions/product.js","functions/rating.js","components/cards/ProductCard.js","components/cards/LoadingCard.js","components/home/NewArrivals.js","components/home/BestSellers.js","functions/category.js","components/category/CategoryList.js","functions/sub.js","components/sub/SubList.js","pages/Home.js","firebase.js","pages/auth/Login.js","pages/auth/Register.js","pages/auth/RegisterComplete.js","pages/auth/ForgotPassword.js","components/nav/UserNav.js","functions/user.js","components/cards/ShowPaymentInfo.js","components/order/Invoice.js","pages/user/History.js","pages/user/Password.js","pages/user/Wishlist.js","components/nav/AdminNav.js","functions/admin.js","components/order/Orders.js","pages/admin/AdminDashboard.js","components/forms/CategoryForm.js","components/forms/LocalSearch.js","pages/admin/category/CategoryCreate.js","pages/admin/category/CategoryUpdate.js","pages/admin/sub/SubCreate.js","pages/admin/sub/SubUpdate.js","components/forms/ProductCreateForm.js","components/forms/FileUpload.js","pages/admin/product/ProductCreate.js","components/cards/AdminProductCard.js","pages/admin/product/AllProducts.js","components/forms/ProductUpdateForm.js","pages/admin/product/ProductUpdate.js","functions/coupon.js","pages/admin/coupon/CreateCouponPage.js","components/cards/ProductListItem.js","components/modal/RatingModal.js","components/cards/SingleProduct.js","pages/Product.js","pages/category/CategoryHome.js","pages/sub/SubHome.js","components/forms/Star.js","pages/Shop.js","components/cards/ProductCardInCheckout.js","pages/Cart.js","pages/Checkout.js","functions/stripe.js","components/StripeCheckout.js","pages/Payment.js","App.js","reducers/cartReducer.js","reducers/index.js","reducers/userReducer.js","reducers/searchReducer.js","reducers/drawerReducer.js","reducers/couponReducer.js","reducers/CODReducer.js","index.js"],"names":["SideDrawer","children","dispatch","useDispatch","useSelector","state","drawer","cart","imageStyle","width","height","objectFit","className","title","length","placement","closable","onClose","type","payload","visible","map","p","images","src","url","style","count","laptop","_id","to","onClick","Search","text","search","history","useHistory","handleSubmit","e","preventDefault","push","onSubmit","onChange","target","value","placeholder","SearchOutlined","cursor","SubMenu","Menu","Item","Header","useState","current","setCurrent","user","key","selectedKeys","mode","icon","AppstoreOutlined","ShoppingOutlined","ShoppingCartOutlined","offset","UserAddOutlined","UserOutlined","SettingOutlined","email","split","role","LogoutOutlined","firebase","auth","signOut","LoadingToRedirect","setCount","useEffect","interval","setInterval","currentCount","clearInterval","UserRoute","rest","token","createOrUpdateUser","authtoken","a","axios","post","process","headers","currentUser","currentAdmin","AdminRoute","ok","setOk","then","res","console","log","catch","err","Jumbotron","options","strings","autoStart","loop","createProduct","product","getProductByCount","get","removeProduct","slug","delete","getProduct","updateProduct","put","getProducts","sort","order","page","getProductsCount","productStar","productId","star","getRelated","fetchProductsByFilter","arg","showAverage","ratings","ratingsArray","total","r","result","reduce","n","starDimension","starSpacing","starRatedColor","editing","rating","Meta","Card","ProductCard","tooltip","setTooltip","description","price","cover","actions","EyeOutlined","window","localStorage","getItem","JSON","parse","unique","_","uniqWith","isEqual","setItem","stringify","disabled","quantity","substring","LoadingCard","totalCard","i","active","cards","NewArrivals","products","setProducts","loading","setLoading","productsCount","setProductsCount","setPage","loadAllProducts","data","BestSellers","getCategories","getCategory","removeCategory","updateCategory","category","createCategory","getCategorySubs","CategoryList","categories","setCategories","c","name","getSubs","getSub","removeSub","updateSub","sub","createSub","SubList","subs","setSubs","s","Home","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","googleAuthProvider","GoogleAuthProvider","Login","setEmail","password","setPassword","location","roleBasedRedirect","intended","from","signInWithEmailAndPassword","getIdTokenResult","idTokenResult","toast","error","message","googleLogin","signInWithPopup","autoFocus","block","shape","MailOutlined","size","GoogleOutlined","Register","config","handleCodeInApp","sendSignInLinkToEmail","success","RegisterComplete","props","signInWithEmailLink","href","emailVerified","removeItem","updatePassword","ForgotPassword","sendPasswordResetEmail","UserNav","userCart","getUserCart","emptyUserCart","saveUserAddress","address","applyCoupon","coupon","createOrder","stripeResponse","getUserOrders","getWishlist","removeWishlist","addToWishlist","createCashOrderForUser","COD","couponApplied","ShowPaymentInfo","showStatus","paymentIntent","id","amount","toLocaleString","currency","toUpperCase","payment_method_types","status","Date","created","orderStatus","styles","StyleSheet","create","body","paddingTop","paddingBottom","paddingHorizontal","fontSize","textAlign","author","marginBottom","subtitle","margin","image","marginVertical","marginHorizontal","header","color","footer","padding","pageNumber","position","bottom","left","right","Invoice","fixed","getContent","x","brand","History","orders","setOrders","loadUserOrders","showOrderInTable","scope","shipping","CheckCircleOutlined","CloseCircleOutlined","showDownloadLink","document","fileName","Password","Wishlist","wishlist","setWishlist","loadWishlist","DeleteOutlined","AdminNav","getOrders","changeStatus","orderId","Orders","handleStatusChange","defaultValue","AdminDashboard","loadOrders","CategoryForm","setName","required","LocalSearch","keyword","setKeyword","toLowerCase","CategoryCreate","loadCategories","handleRemove","confirm","filter","includes","searched","EditOutlined","CategoryUpdate","match","loadCategory","params","SubCreate","setCategory","loadSubs","parent","SubUpdate","setParent","loadSub","selected","Option","Select","ProductCreateForm","handleChange","setValues","values","handleCategoryChange","subOptions","showSub","colors","brands","b","FileUpload","public_id","filteredImages","item","multiple","hidden","accept","files","allUploadedFiles","Resizer","imageFileResizer","uri","initialState","ProductCreate","setSubOptions","setShowSub","LoadingOutlined","AdminProductCard","AllProducts","ProductUpdateForm","arrayOfSubs","setArrayOfSubs","selectedCategory","ProductUpdate","setSelectedCategory","loadProduct","arr","prev","getCoupons","removeCoupon","couponId","createCoupon","CreateCouponPage","expiry","setExpiry","discount","setDiscount","coupons","setCoupons","loadAllCoupons","date","toLocaleDateString","ProductListItems","sold","RatingModal","modalVisible","setModalVisible","useParams","pathname","StarOutlined","centered","onOk","onCancel","TabPane","Tabs","SingleProduct","onStarClick","showArrows","autoPlay","infiniteLoop","Laptop","tab","HeartOutlined","numberOfStars","changeRating","isSelectable","ProductListItem","Product","setProduct","related","setRelated","setStar","loadSingleProduct","existingRatingObject","find","ele","postedBy","toString","newRating","CategoryHome","SubHome","setSub","Star","starClick","starHoverColor","starEmptyColor","Shop","ItemGroup","setPrice","categoryIds","setCategoryIds","setBrand","setColor","setShipping","delayed","setTimeout","fetchProducts","query","clearTimeout","handleCheck","inTheState","justChecked","foundInTheState","indexOf","splice","handleStarClick","num","stars","handleSub","handleBrand","handleColor","handleShippingChange","defaultOpenKeys","DollarOutlined","tipFormatter","v","range","max","DownSquareOutlined","marginTop","checked","TagOutlined","ProductCardInCheckout","small","large","CloseOutlined","Cart","currentValue","nextValue","Checkout","setTotal","setAddress","addressSaved","setAddressSaved","setCoupon","totalAfterDiscount","setTotalAfterDiscount","discountError","setDiscountError","couponTrueOrFalse","cartTotal","saveAddressToDb","applyDiscountCoupon","theme","createPaymentIntent","StripeCheckout","succeeded","setSucceeded","setError","processing","setProcessing","setDisabled","clientSecret","setClientSecret","setCartTotal","payable","setPayable","stripe","useStripe","elements","useElements","confirmCardPayment","payment_method","card","getElement","CardElement","billing_details","undefined","CheckOutlined","toFixed","base","fontFamily","fontSmoothing","invalid","iconColor","empty","promise","loadStripe","Payment","App","unSubscribe","onAuthStateChanged","exact","path","component","CouponCreatePage","rootReducer","combineReducers","action","store","createStore","composeWithDevTools","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.2fe88b8b.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/laptop.db0a6ff4.png\";","import React from 'react'\r\nimport { Drawer, Button } from 'antd'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport laptop from '../../images/laptop.png'\r\n\r\nconst SideDrawer = ({ children }) => {\r\n    const dispatch = useDispatch()\r\n    const { drawer, cart } = useSelector((state) => ({ ...state }))\r\n\r\n    const imageStyle = {\r\n        width: '100%',\r\n        height: '50px',\r\n        objectFit: 'cover'\r\n    }\r\n\r\n    return (\r\n        <Drawer\r\n            className=\"text-center\"\r\n            title={`Cart / ${cart.length} Product`}\r\n            placement=\"right\"\r\n            closable={false}\r\n            onClose={() => {\r\n                dispatch({\r\n                    type: \"SET_VISIBLE\",\r\n                    payload: false\r\n                })\r\n            }}\r\n            visible={drawer}\r\n        >\r\n            {cart.map((p) => (\r\n                <div key={p._id} className=\"row\">\r\n                    <div className=\"col\">\r\n                        {p.images[0] ? (\r\n                            <div>\r\n                                <img src={p.images[0].url} style={imageStyle} />\r\n                                <p className=\"text-center bg-secondary text-light\">\r\n                                    {p.title} x {p.count}\r\n                                </p>\r\n                            </div>\r\n                        ) : (\r\n                                <div>\r\n                                    <img src={laptop} style={imageStyle} />\r\n                                    <p className=\"text-center bg-secondary text-light\">\r\n                                        {p.title} x {p.count}\r\n                                    </p>\r\n                                </div>\r\n                            )}\r\n                    </div>\r\n                </div>\r\n            ))}\r\n\r\n            <Link to=\"/cart\">\r\n                <button\r\n                    onClick={() =>\r\n                        dispatch({\r\n                            type: \"SET_VISIBLE\",\r\n                            payload: false\r\n                        })\r\n                    }\r\n                    className=\"text-center btn btn-primary btn-raised btn-block\">\r\n                    Go To Cart\r\n                </button>\r\n            </Link>\r\n        </Drawer>\r\n    )\r\n}\r\n\r\nexport default SideDrawer","import React from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { SearchOutlined } from '@ant-design/icons'\r\n\r\nconst Search = () => {\r\n    let dispatch = useDispatch()\r\n    const { search } = useSelector((state) => ({ ...state }))\r\n    const { text } = search\r\n\r\n    const history = useHistory()\r\n\r\n    const handleChange = (e) => {\r\n        dispatch({\r\n            type: \"SEARCH_QUERY\",\r\n            payload: { text: e.target.value }\r\n        })\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        history.push(`/shop?${text}`)\r\n    }\r\n\r\n    return (\r\n        <form className=\"form-inline my-2 my-lg-0\" onSubmit={handleSubmit}>\r\n            <input\r\n                onChange={handleChange}\r\n                type=\"search\"\r\n                value={text}\r\n                className=\"form-control mr-sm-2\"\r\n                placeholder=\"Search\"\r\n            />\r\n            <SearchOutlined onClick={handleSubmit} style={{ cursor: \"pointer\" }} />\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default Search","import React, { useState } from 'react'\r\nimport { Badge, Menu } from \"antd\"\r\nimport {\r\n    AppstoreOutlined,\r\n    SettingOutlined,\r\n    UserOutlined,\r\n    UserAddOutlined,\r\n    LogoutOutlined,\r\n    ShoppingOutlined,\r\n    ShoppingCartOutlined,\r\n    CarTwoTone\r\n} from '@ant-design/icons';\r\nimport { Link } from 'react-router-dom'\r\nimport firebase from 'firebase'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\nimport Search from '../forms/Search'\r\n\r\nconst { SubMenu, Item } = Menu;\r\n\r\nconst Header = () => {\r\n    const [current, setCurrent] = useState(\"home\")\r\n    let dispatch = useDispatch()\r\n    let history = useHistory()\r\n    let { user, cart } = useSelector((state) => ({ ...state }))\r\n\r\n    const handleClick = (e) => {\r\n        setCurrent(e.key)\r\n    }\r\n\r\n    const logout = () => {\r\n        firebase.auth().signOut()\r\n        dispatch({\r\n            type: \"LOGOUT\",\r\n            payload: null\r\n        })\r\n        history.push(\"/login\")\r\n    }\r\n\r\n    return (\r\n        <Menu onClick={handleClick} selectedKeys={[current]} mode=\"horizontal\">\r\n            <Item key=\"home\" icon={<AppstoreOutlined />}>\r\n                <Link to=\"/\">Home</Link>\r\n            </Item>\r\n\r\n            <Item key=\"shop\" icon={<ShoppingOutlined />}>\r\n                <Link to=\"/shop\">Shop</Link>\r\n            </Item>\r\n\r\n            <Item key=\"cart\" icon={<ShoppingCartOutlined />}>\r\n                <Link to=\"/cart\">\r\n                    <Badge count={cart.length} offset={[9, 0]}>\r\n                        Cart\r\n                    </Badge>\r\n                </Link>\r\n            </Item>\r\n\r\n            {!user && (\r\n                <Item key=\"register\" icon={<UserAddOutlined />} className=\"float-right\">\r\n                    <Link to=\"/register\">Register</Link>\r\n                </Item>\r\n            )}\r\n\r\n            {!user && (\r\n                <Item key=\"login\" icon={<UserOutlined />} className=\"float-right\">\r\n                    <Link to=\"/login\">Login</Link>\r\n                </Item>\r\n            )}\r\n\r\n            {user && (\r\n                <SubMenu\r\n                    icon={<SettingOutlined />}\r\n                    title={user.email && user.email.split(\"@\")[0]}\r\n                    className=\"float-right\"\r\n                >\r\n                    {user && user.role === \"subscriber\" && (\r\n                        <Item>\r\n                            <Link to=\"/user/history\">Dashboard</Link>\r\n                        </Item>\r\n                    )}\r\n\r\n                    {user && user.role === \"admin\" && (\r\n                        <Item>\r\n                            <Link to=\"/admin/dashboard\">Dashboard</Link>\r\n                        </Item>\r\n                    )}\r\n\r\n                    <Item icon={<LogoutOutlined />} onClick={logout}>\r\n                        Logout\r\n                    </Item>\r\n                </SubMenu>\r\n            )}\r\n\r\n            <span className=\"float-right p-1\">\r\n                <Search />\r\n            </span>\r\n        </Menu>\r\n    )\r\n}\r\n\r\nexport default Header","import React, { useState, useEffect } from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nconst LoadingToRedirect = () => {\r\n    const [count, setCount] = useState(5)\r\n    let history = useHistory()\r\n\r\n    useEffect(() => {\r\n        const interval = setInterval(() => {\r\n            setCount((currentCount) => --currentCount)\r\n        }, 1000)\r\n        count === 0 && history.push(\"/\")\r\n        return () => clearInterval(interval)\r\n    }, [count, history])\r\n\r\n    return (\r\n        <div className=\"container p-5 text-center\">\r\n            <p>Redirecting you in {count} seconds</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LoadingToRedirect\r\n","import React from 'react'\r\nimport { Route, Link } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\nimport LoadingToRedirect from './LoadingToRedirect'\r\n\r\nconst UserRoute = ({ children, ...rest }) => {\r\n    const { user } = useSelector((state) => ({ ...state }))\r\n\r\n    return user && user.token ? (\r\n        <Route {...rest} />\r\n    ) : (\r\n            <LoadingToRedirect />\r\n        )\r\n}\r\n\r\nexport default UserRoute","import axios from 'axios'\r\n\r\nexport const createOrUpdateUser = async (authtoken) => {\r\n    return await axios.post(`${process.env.REACT_APP_API}/create-or-update-user`, {}, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n}\r\n\r\nexport const currentUser = async (authtoken) => {\r\n    return await axios.post(`${process.env.REACT_APP_API}/current-user`, {}, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n}\r\n\r\nexport const currentAdmin = async (authtoken) => {\r\n    return await axios.post(`${process.env.REACT_APP_API}/current-admin`, {}, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { Route, Link } from 'react-router-dom'\r\nimport { useSelector } from 'react-redux'\r\nimport LoadingToRedirect from './LoadingToRedirect'\r\nimport { currentAdmin } from '../../functions/auth'\r\n\r\nconst AdminRoute = ({ children, ...rest }) => {\r\n    const { user } = useSelector((state) => ({ ...state }))\r\n    const [ok, setOk] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if (user && user.token) {\r\n            currentAdmin(user.token)\r\n                .then((res) => {\r\n                    console.log(\"CURRENT ADMIN RES\", res)\r\n                    setOk(true)\r\n                })\r\n                .catch((err) => {\r\n                    console.log(\"ADMIN ROUTE ERR\", err)\r\n                    setOk(false)\r\n                })\r\n        }\r\n    }, [user])\r\n\r\n    return ok ? (\r\n        <Route {...rest} />\r\n    ) : (\r\n            <LoadingToRedirect />\r\n        )\r\n}\r\n\r\nexport default AdminRoute","import React from 'react'\r\nimport Typewriter from 'typewriter-effect'\r\n\r\nconst Jumbotron = ({ text }) => {\r\n    return (\r\n        <Typewriter\r\n            options={{\r\n                strings: text,\r\n                autoStart: true,\r\n                loop: true\r\n            }}\r\n        />\r\n    )\r\n}\r\n\r\nexport default Jumbotron","import axios from 'axios'\r\n\r\nexport const createProduct = async (product, authtoken) => {\r\n    console.log(\"Product\", product)\r\n    await axios.post(`${process.env.REACT_APP_API}/product`, product, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n}\r\n\r\nexport const getProductByCount = async (count) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/products/${count}`)\r\n\r\n\r\nexport const removeProduct = async (slug, authtoken) => {\r\n    await axios.delete(`${process.env.REACT_APP_API}/product/${slug}`, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n}\r\n\r\nexport const getProduct = async (slug) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/product/${slug}`)\r\n\r\nexport const updateProduct = async (slug, product, authtoken) => {\r\n    await axios.put(`${process.env.REACT_APP_API}/product/${slug}`, product, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n}\r\n\r\nexport const getProducts = async (sort, order, page) =>\r\n    await axios.post(`${process.env.REACT_APP_API}/products`, { sort, order, page })\r\n\r\nexport const getProductsCount = async () =>\r\n    await axios.get(`${process.env.REACT_APP_API}/products/total`)\r\n\r\nexport const productStar = async (productId, star, authtoken) => {\r\n    await axios.put(`${process.env.REACT_APP_API}/product/star/${productId}`, { star }, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n}\r\n\r\nexport const getRelated = async (productId) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/product/related/${productId}`)\r\n\r\nexport const fetchProductsByFilter = async (arg) =>\r\n    await axios.post(`${process.env.REACT_APP_API}/search/filters`, arg)","import React from 'react'\r\nimport StarRating from 'react-star-ratings'\r\n\r\nexport const showAverage = (p) => {\r\n    if (p && p.ratings) {\r\n        let ratingsArray = p && p.ratings\r\n        let total = []\r\n        let length = ratingsArray.length\r\n\r\n        ratingsArray.map((r) => total.push(r.star))\r\n        let totalReduced = total.reduce((p, n) => p + n, 0)\r\n        let highest = length * 5\r\n        let result = (totalReduced * 5) / highest\r\n\r\n        return (\r\n            <div className=\"text-center pt-1 pb-3\">\r\n                <span>\r\n                    <StarRating\r\n                        starDimension=\"20px\"\r\n                        starSpacing=\"2px\"\r\n                        starRatedColor=\"red\"\r\n                        editing={false}\r\n                        rating={result}\r\n                    />\r\n                    ({p.ratings.length})\r\n                </span>\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { useState } from 'react'\r\nimport { Card, Tooltip } from 'antd'\r\nimport { EyeOutlined, ShoppingCartOutlined } from '@ant-design/icons'\r\nimport { Link } from 'react-router-dom'\r\nimport { showAverage } from '../../functions/rating'\r\nimport laptop from '../../images/laptop.png'\r\nimport _ from 'lodash'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\nconst { Meta } = Card\r\n\r\nconst ProductCard = ({ product }) => {\r\n\r\n    const [tooltip, setTooltip] = useState(\"Click to add\")\r\n\r\n    const { user, cart } = useSelector((state) => ({ ...state }))\r\n    const dispatch = useDispatch()\r\n\r\n    const handleAddToCart = () => {\r\n        let cart = []\r\n        if (typeof window !== \"undefined\") {\r\n            if (localStorage.getItem(\"cart\")) {\r\n                cart = JSON.parse(localStorage.getItem(\"cart\"))\r\n            }\r\n\r\n            cart.push({\r\n                ...product,\r\n                count: 1\r\n            })\r\n\r\n            let unique = _.uniqWith(cart, _.isEqual)\r\n            localStorage.setItem(\"cart\", JSON.stringify(unique))\r\n            setTooltip(\"Added\")\r\n\r\n            dispatch({\r\n                type: \"ADD_TO_CART\",\r\n                payload: unique\r\n            })\r\n\r\n            dispatch({\r\n                type: \"SET_VISIBLE\",\r\n                payload: true\r\n            })\r\n        }\r\n    }\r\n\r\n    const { images, title, description, slug, price } = product\r\n\r\n    return (\r\n        <div>\r\n            {product && product.ratings && product.ratings.length > 0\r\n                ? (showAverage(product))\r\n                : (<div className=\"text-center pt-1 pb-3\">No rating yet</div>)\r\n            }\r\n            <Card\r\n                cover={\r\n                    <img\r\n                        src={images && images.length ? images[0].url : laptop}\r\n                        style={{ height: \"150px\", objectFit: \"cover\" }}\r\n                        className=\"p-1\"\r\n                    />\r\n                }\r\n                actions={[\r\n                    <Link to={`/product/${slug}`}>\r\n                        <EyeOutlined className=\"text-warning\" /> <br /> View Product\r\n                    </Link>,\r\n                    <Tooltip title={tooltip}>\r\n                        <a onClick={handleAddToCart} disabled={product.quantity < 1}>\r\n                            <ShoppingCartOutlined className=\"text-danger\" /> <br />\r\n                            {product.quantity < 1 ? \"Out of stock\" : \"Add to cart\"}\r\n                        </a>\r\n                    </Tooltip>\r\n                ]}\r\n            >\r\n\r\n                <Meta title={`${title} - $${price}`} description={`${description && description.substring(0, 40)}...`} />\r\n            </Card>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProductCard","import { LoadingOutlined } from '@ant-design/icons'\r\nimport React from 'react'\r\nimport { Card, Skeleton } from 'antd'\r\n\r\nconst LoadingCard = ({ count }) => {\r\n    const cards = () => {\r\n        let totalCard = []\r\n        for (let i = 0; i < count; i++) {\r\n            totalCard.push(\r\n                <Card className=\"col-md-4\" key={i}>\r\n                    <Skeleton active></Skeleton>\r\n                </Card>\r\n            )\r\n        }\r\n    }\r\n    return <div className=\"row pb-3\">{cards()}</div>\r\n}\r\n\r\nexport default LoadingCard","import React, { useEffect, useState } from 'react'\r\nimport { getProducts, getProductsCount } from '../../functions/product'\r\nimport ProductCard from '../cards/ProductCard'\r\nimport LoadingCard from '../cards/LoadingCard'\r\nimport { Pagination } from 'antd'\r\n\r\nconst NewArrivals = () => {\r\n    const [products, setProducts] = useState([])\r\n    const [loading, setLoading] = useState(false)\r\n    const [productsCount, setProductsCount] = useState(0)\r\n    const [page, setPage] = useState(1)\r\n\r\n    useEffect(() => {\r\n        loadAllProducts()\r\n    }, [page])\r\n\r\n    useEffect(() => {\r\n        getProductsCount().then((res) => setProductsCount(res.data))\r\n    }, [])\r\n\r\n    const loadAllProducts = () => {\r\n        setLoading(true)\r\n        getProducts(\"createdAt\", \"desc\", page).then((res) => {\r\n            setProducts(res.data)\r\n            setLoading(false)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"container\">\r\n                {loading ? (\r\n                    <LoadingCard count={3} />\r\n                ) : (\r\n                        <div className=\"row\">\r\n                            {products.map((product) => (\r\n                                <div className=\"col-md-4\">\r\n                                    <ProductCard product={product} />\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n            </div>\r\n            <div className=\"row\">\r\n                <nav className=\"col-md-4 offset-md-4 text-center pt-5 p-3\">\r\n                    <Pagination\r\n                        current={page}\r\n                        total={(productsCount / 3) * 10}\r\n                        onChange={(value) => setPage(value)}\r\n                    />\r\n                </nav>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default NewArrivals;\r\n","import React, { useEffect, useState } from 'react'\r\nimport { getProducts, getProductsCount } from '../../functions/product'\r\nimport ProductCard from '../cards/ProductCard'\r\nimport LoadingCard from '../cards/LoadingCard'\r\nimport { Pagination } from 'antd'\r\n\r\nconst BestSellers = () => {\r\n    const [products, setProducts] = useState([])\r\n    const [loading, setLoading] = useState(false)\r\n    const [productsCount, setProductsCount] = useState(0)\r\n    const [page, setPage] = useState(1)\r\n\r\n    useEffect(() => {\r\n        loadAllProducts()\r\n    }, [page])\r\n\r\n    useEffect(() => {\r\n        getProductsCount().then((res) => setProductsCount(res.data))\r\n    }, [])\r\n\r\n    const loadAllProducts = () => {\r\n        setLoading(true)\r\n        getProducts(\"createdAt\", \"desc\", page).then((res) => {\r\n            setProducts(res.data)\r\n            setLoading(false)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"container\">\r\n                {loading ? (\r\n                    <LoadingCard count={3} />\r\n                ) : (\r\n                        <div className=\"row\">\r\n                            {products.map((product) => (\r\n                                <div className=\"col-md-4\">\r\n                                    <ProductCard product={product} />\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n            </div>\r\n            <div className=\"row\">\r\n                <nav className=\"col-md-4 offset-md-4 text-center pt-5 p-3\">\r\n                    <Pagination\r\n                        current={page}\r\n                        total={(productsCount / 3) * 10}\r\n                        onChange={(value) => setPage(value)}\r\n                    />\r\n                </nav>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default BestSellers;\r\n","import axios from 'axios'\r\n\r\nexport const getCategories = async () =>\r\n    await axios.get(`${process.env.REACT_APP_API}/categories`)\r\n\r\n\r\nexport const getCategory = async (slug) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/category/${slug}`)\r\n\r\n\r\nexport const removeCategory = async (slug, authtoken) => {\r\n    await axios.delete(`${process.env.REACT_APP_API}/category/${slug}`, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n}\r\n\r\nexport const updateCategory = async (slug, category, authtoken) => {\r\n    await axios.put(`${process.env.REACT_APP_API}/category/${slug}`, category, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n}\r\n\r\nexport const createCategory = async (category, authtoken) => {\r\n    await axios.post(`${process.env.REACT_APP_API}/category`, category, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n}\r\n\r\nexport const getCategorySubs = async (_id) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/category/subs/${_id}`)\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { getCategories } from '../../functions/category'\r\n\r\nconst CategoryList = () => {\r\n    const [categories, setCategories] = useState([])\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    useEffect(() => {\r\n        setLoading(true)\r\n        getCategories().then((c) => {\r\n            setCategories(c.data)\r\n            setLoading(false)\r\n        })\r\n    }, [])\r\n\r\n    const showCategories = () =>\r\n        categories.map((c) => (\r\n            <div key={c._id} className=\"btn btn-outlined-primary btn-lg btn-block btn-raised m-3\">\r\n                <Link to={`/category/${c.slug}`}>\r\n                    {c.name}\r\n                </Link>\r\n            </div>\r\n        ))\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"row\">\r\n                {loading ? (\r\n                    <h4 className=\"text-danger\">Loading...</h4>\r\n                ) : (\r\n                        showCategories()\r\n                    )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CategoryList","import axios from 'axios'\r\n\r\nexport const getSubs = async () =>\r\n    await axios.get(`${process.env.REACT_APP_API}/subs`)\r\n\r\n\r\nexport const getSub = async (slug) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/sub/${slug}`)\r\n\r\n\r\nexport const removeSub = async (slug, authtoken) => {\r\n    await axios.delete(`${process.env.REACT_APP_API}/sub/${slug}`, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n}\r\n\r\nexport const updateSub = async (slug, sub, authtoken) => {\r\n    await axios.put(`${process.env.REACT_APP_API}/sub/${slug}`, sub, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n}\r\n\r\nexport const createSub = async (sub, authtoken) => {\r\n    await axios.post(`${process.env.REACT_APP_API}/sub`, sub, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { getSubs } from '../../functions/sub'\r\n\r\nconst SubList = () => {\r\n    const [subs, setSubs] = useState([])\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    useEffect(() => {\r\n        setLoading(true)\r\n        getSubs().then((res) => {\r\n            setSubs(res.data)\r\n            setLoading(false)\r\n        })\r\n    }, [])\r\n\r\n    const showSubs = () =>\r\n        subs.map((s) => (\r\n            <div key={s._id} className=\"btn btn-outlined-primary btn-lg btn-block btn-raised m-3\">\r\n                <Link to={`/sub/${s.slug}`}>\r\n                    {s.name}\r\n                </Link>\r\n            </div>\r\n        ))\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"row\">\r\n                {loading ? (\r\n                    <h4 className=\"text-danger\">Loading...</h4>\r\n                ) : (\r\n                        showSubs()\r\n                    )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SubList","import React from 'react'\r\nimport Jumbotron from '../components/cards/Jumbotron'\r\nimport NewArrivals from '../components/home/NewArrivals'\r\nimport BestSellers from '../components/home/BestSellers'\r\nimport CategoryList from '../components/category/CategoryList'\r\nimport SubList from '../components/sub/SubList'\r\n\r\nconst Home = () => {\r\n    return (\r\n        <div>\r\n            <div className=\"jumbotron text-danger h1 font-weight-bold text-center\">\r\n                <Jumbotron text={[\"Latest Products\", \"New Arrivals\", \"Best Sellers\"]} />\r\n            </div>\r\n\r\n            <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\r\n                New Arrivals\r\n            </h4>\r\n            <NewArrivals />\r\n\r\n            <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\r\n                Best Sellers\r\n            </h4>\r\n            <BestSellers />\r\n\r\n            <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\r\n                Categories\r\n            </h4>\r\n            <CategoryList />\r\n\r\n            <h4 className=\"text-center p-3 mt-5 mb-5 display-4 jumbotron\">\r\n                Sub Categories\r\n            </h4>\r\n            <SubList />\r\n\r\n            <br />\r\n            <br />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Home;\r\n","import firebase from 'firebase'\r\n\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyC1OKADO-GsCn6K3SgkGY4jC_bC66OERmE\",\r\n    authDomain: \"ecommerce-19d24.firebaseapp.com\",\r\n    projectId: \"ecommerce-19d24\",\r\n    storageBucket: \"ecommerce-19d24.appspot.com\",\r\n    messagingSenderId: \"1071079575925\",\r\n    appId: \"1:1071079575925:web:37ecb9247ce6ae7a66433c\"\r\n};\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport const auth = firebase.auth()\r\n\r\nexport const googleAuthProvider = new firebase.auth.GoogleAuthProvider()","import React, { useState, useEffect } from 'react'\r\nimport { auth, googleAuthProvider } from '../../firebase'\r\nimport { toast } from 'react-toastify'\r\nimport { Button } from 'antd'\r\nimport { MailOutlined, GoogleOutlined } from '@ant-design/icons'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport { createOrUpdateUser } from '../../functions/auth'\r\n\r\nconst Login = ({ history }) => {\r\n    const [email, setEmail] = useState(\"prajapatimahin@gmail.com\")\r\n    const [password, setPassword] = useState(\"mahin161997\")\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const { user } = useSelector((state) => ({ ...state }))\r\n\r\n    useEffect(() => {\r\n        let intended = history.location.state\r\n        if (intended) {\r\n            return\r\n        } else {\r\n            if (user && user.token) history.push(\"/\")\r\n        }\r\n    }, [user, history])\r\n\r\n    let dispatch = useDispatch()\r\n\r\n    const roleBasedRedirect = (res) => {\r\n        let intended = history.location.state\r\n        if (intended) {\r\n            history.push(intended.from)\r\n        } else {\r\n            if (res.data.role === \"admin\") {\r\n                history.push(\"/admin/dashboard\")\r\n            } else {\r\n                history.push(\"/user/history\")\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n        setLoading(true)\r\n        try {\r\n            const result = await auth.signInWithEmailAndPassword(email, password)\r\n            const { user } = result\r\n            const idTokenResult = await user.getIdTokenResult()\r\n            console.log(\"User\", idTokenResult)\r\n            createOrUpdateUser(idTokenResult.token)\r\n                .then((res) => {\r\n                    dispatch({\r\n                        type: \"LOGGED_IN_USER\",\r\n                        payload: {\r\n                            name: res.data.name,\r\n                            email: res.data.email,\r\n                            token: idTokenResult.token,\r\n                            role: res.data.role,\r\n                            _id: res.data._id\r\n                        }\r\n                    })\r\n                    roleBasedRedirect(res)\r\n                })\r\n                .catch((err) => console.log(err))\r\n\r\n            // history.push('/')\r\n        } catch (error) {\r\n            console.log(error)\r\n            toast.error(error.message)\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const googleLogin = async () => {\r\n        auth.signInWithPopup(googleAuthProvider).then(async (result) => {\r\n            const { user } = result\r\n            const idTokenResult = await user.getIdTokenResult()\r\n            createOrUpdateUser(idTokenResult.token)\r\n                .then((res) => {\r\n                    dispatch({\r\n                        type: \"LOGGED_IN_USER\",\r\n                        payload: {\r\n                            name: res.data.name,\r\n                            email: res.data.email,\r\n                            token: idTokenResult.token,\r\n                            role: res.data.role,\r\n                            _id: res.data._id\r\n                        }\r\n                    })\r\n                    roleBasedRedirect(res)\r\n                })\r\n                .catch((err) => console.log(err))\r\n            // history.push('/')\r\n        }).catch((error) => {\r\n            console.log(error)\r\n            toast.error(error.message)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"container p-5\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 offset-md-3\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-danger\">Loading...</h4>\r\n                    ) : (\r\n                            <h4>Login</h4>\r\n                        )}\r\n                    <form onSubmit={handleSubmit}>\r\n                        <div className=\"form-group\">\r\n                            <input\r\n                                type=\"email\"\r\n                                className=\"form-control\"\r\n                                value={email}\r\n                                onChange={(e) => setEmail(e.target.value)}\r\n                                autoFocus\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"form-group\">\r\n                            <input\r\n                                type=\"password\"\r\n                                className=\"form-control\"\r\n                                value={password}\r\n                                onChange={(e) => setPassword(e.target.value)}\r\n                            />\r\n                        </div>\r\n\r\n                        <br />\r\n                        <Button\r\n                            onClick={handleSubmit}\r\n                            type=\"primary\"\r\n                            className=\"mb-3\"\r\n                            block\r\n                            shape=\"round\"\r\n                            icon={<MailOutlined />}\r\n                            size=\"large\"\r\n                            disabled={!email || password.length < 6}\r\n                        >\r\n                            Login with email/password\r\n                        </Button>\r\n                        <Button\r\n                            onClick={googleLogin}\r\n                            type=\"danger\"\r\n                            className=\"mb-3\"\r\n                            block\r\n                            shape=\"round\"\r\n                            icon={<GoogleOutlined />}\r\n                            size=\"large\"\r\n                        >\r\n                            Login with email/password\r\n                        </Button>\r\n\r\n                        <Link to=\"/forgot/password\" className=\"float-right text-danger\">\r\n                            Forgot Password\r\n                        </Link>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;\r\n\r\n","import React, { useState, useEffect } from 'react'\r\nimport { auth } from '../../firebase'\r\nimport { toast } from 'react-toastify'\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst Register = ({ history }) => {\r\n    const [email, setEmail] = useState(\"\")\r\n\r\n    const { user } = useSelector((state) => ({ ...state }))\r\n\r\n    useEffect(() => {\r\n        if (user && user.token) history.push(\"/\")\r\n    }, [user])\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n        const config = {\r\n            url: process.env.REACT_APP_REGISTER_REDIRECT_URL,\r\n            handleCodeInApp: true\r\n        }\r\n\r\n        await auth.sendSignInLinkToEmail(email, config)\r\n        toast.success(`Email is sent to ${email}. Click the link to complete your registration`)\r\n\r\n        //Save user email in local storage\r\n        window.localStorage.setItem(\"emailForRegistartion\", email)\r\n\r\n        //Clear state\r\n        setEmail(\"\")\r\n    }\r\n\r\n    return (\r\n        <div className=\"container p-5\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 offset-md-3\">\r\n                    <h4>Register</h4>\r\n                    <form onSubmit={handleSubmit}>\r\n                        <input\r\n                            type=\"email\"\r\n                            className=\"form-control\"\r\n                            value={email}\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                            autoFocus\r\n                        />\r\n                        <button type=\"submit\" className=\"btn btn-raised\">\r\n                            Register\r\n                        </button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Register;\r\n","import React, { useState, useEffect } from 'react'\r\nimport { auth } from '../../firebase'\r\nimport { toast } from 'react-toastify'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { createOrUpdateUser } from '../../functions/auth'\r\n\r\nconst RegisterComplete = (props) => {\r\n    const [email, setEmail] = useState(\"\")\r\n    const [password, setPassword] = useState(\"\")\r\n\r\n    let dispatch = useDispatch()\r\n\r\n    const { user } = useSelector((state) => ({ ...state }))\r\n\r\n    useEffect(() => {\r\n        setEmail(window.localStorage.getItem(\"emailForRegistration\"))\r\n    }, [])\r\n\r\n    let history = useHistory()\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n        // validation\r\n        if (!email || !password) {\r\n            toast.error(\"email and password is required\")\r\n        }\r\n\r\n        if (password.length < 6) {\r\n            toast.error(\"password must be at least 6 characters\")\r\n        }\r\n\r\n        try {\r\n            const result = await auth.signInWithEmailLink(email, window.location.href)\r\n            if (result.user.emailVerified) {\r\n                // remove user email from local storage\r\n                window.localStorage.removeItem(\"emailForRegistartion\")\r\n                // get user id token\r\n                let user = auth.currentUser\r\n                await user.updatePassword(password)\r\n                const idTokenResult = await user.getIdTokenResult()\r\n                createOrUpdateUser(idTokenResult.token)\r\n                    .then((res) => {\r\n                        dispatch({\r\n                            type: \"LOGGED_IN_USER\",\r\n                            payload: {\r\n                                name: res.data.name,\r\n                                email: res.data.email,\r\n                                token: idTokenResult.token,\r\n                                role: res.data.role,\r\n                                _id: res.data._id\r\n                            }\r\n                        })\r\n                    })\r\n                    .catch((err) => console.log(err))\r\n                history.push(\"/\")\r\n            }\r\n        } catch (error) {\r\n            console.log(error)\r\n            toast.error(error.message)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"container p-5\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-6 offset-md-3\">\r\n                    <h4>Register Complete</h4>\r\n                    <form onSubmit={handleSubmit}>\r\n                        <input\r\n                            type=\"email\"\r\n                            className=\"form-control\"\r\n                            value={email}\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                        />\r\n                        <input\r\n                            type=\"password\"\r\n                            className=\"form-control\"\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            placeholder=\"password\"\r\n                            autoFocus\r\n                        />\r\n                        <br />\r\n                        <button type=\"submit\" className=\"btn btn-raised\">\r\n                            Complete Registration\r\n                        </button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default RegisterComplete;\r\n","import React, { useState, useEffect } from 'react'\r\nimport { auth } from '../../firebase'\r\nimport { toast } from 'react-toastify'\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst ForgotPassword = ({ history }) => {\r\n    const [email, setEmail] = useState(\"\")\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const { user } = useSelector((state) => ({ ...state }))\r\n\r\n    useEffect(() => {\r\n        if (user && user.token) history.push(\"/\")\r\n    }, [user])\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n        setLoading(true)\r\n\r\n        const config = {\r\n            url: process.env.REACT_APP_FORGOT_PASSWORD_REDIRECT,\r\n            handleCodeInApp: true\r\n        }\r\n\r\n        await auth.sendPasswordResetEmail(email, config)\r\n            .then(() => {\r\n                setEmail(\"\")\r\n                setLoading(false)\r\n                toast.success(\"Check your email for password reset link\")\r\n            })\r\n            .catch((error) => {\r\n                setLoading(false)\r\n                toast.error(error.message)\r\n                console.log(\"ERROR MSG IN FORGOT PASSWORD\", error)\r\n            })\r\n    }\r\n\r\n    return (\r\n        <div className=\"container col-md-6 offset-md-3 p-5\">\r\n            {loading ? (\r\n                <h4 className=\"text-danger\">Loading</h4>\r\n            ) : (\r\n                    <h4>Forgot Password</h4>\r\n                )}\r\n\r\n            <form onSubmit={handleSubmit}>\r\n                <input\r\n                    type=\"email\"\r\n                    className=\"form-control\"\r\n                    value={email}\r\n                    onChange={(e) => setEmail(e.target.value)}\r\n                    placeholder=\"Type Your email\"\r\n                    autoFocus\r\n                />\r\n                <br />\r\n                <button className=\"btn btn-raised\" disabled={!email}>\r\n                    Submit\r\n                </button>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ForgotPassword","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst UserNav = () => (\r\n    <nav>\r\n        <ul className=\"nav flex-column\">\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/user/history\" className=\"nav-link\">\r\n                    History\r\n                </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/user/password\" className=\"nav-link\">\r\n                    Password\r\n                </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/user/wishlist\" className=\"nav-link\">\r\n                    Wishlist\r\n                </Link>\r\n            </li>\r\n        </ul>\r\n    </nav>\r\n)\r\n\r\nexport default UserNav","import axios from 'axios'\r\n\r\nexport const userCart = async (cart, authtoken) =>\r\n    await axios.post(`${process.env.REACT_APP_API}/user/cart`, { cart }, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n\r\nexport const getUserCart = async (authtoken) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/user/cart`, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n\r\nexport const emptyUserCart = async (authtoken) =>\r\n    await axios.delete(`${process.env.REACT_APP_API}/user/cart`, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n\r\nexport const saveUserAddress = async (authtoken, address) =>\r\n    await axios.post(`${process.env.REACT_APP_API}/user/address`, { address }, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n\r\nexport const applyCoupon = async (authtoken, coupon) =>\r\n    await axios.post(`${process.env.REACT_APP_API}/user/cart/coupon`, { coupon }, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n\r\nexport const createOrder = async (stripeResponse, authtoken) =>\r\n    await axios.post(`${process.env.REACT_APP_API}/user/order`, { stripeResponse }, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n\r\nexport const getUserOrders = async (authtoken) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/user/orders`, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n\r\nexport const getWishlist = async (authtoken) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/user/wishlist`, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n\r\nexport const removeWishlist = async (productId, authtoken) =>\r\n    await axios.put(`${process.env.REACT_APP_API}/user/wishlist/${productId}`, {}, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n\r\nexport const addToWishlist = async (productId, authtoken) =>\r\n    await axios.post(`${process.env.REACT_APP_API}/user/wishlist`, { productId }, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n\r\nexport const createCashOrderForUser = async (authtoken, COD, coupon) =>\r\n    await axios.post(`${process.env.REACT_APP_API}/user/cash-order`, { couponApplied: coupon, COD }, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })","import React from 'react'\r\n\r\nconst ShowPaymentInfo = ({ order, showStatus = true }) => (\r\n    <div>\r\n        <p>\r\n            <span>Order Id: {order.paymentIntent.id}</span>\r\n            <span>\r\n                Amount:{\" / \"}\r\n                {(order.paymentIntent.amount /= 100).toLocaleString(\"en-US\", {\r\n                    style: \"currency\",\r\n                    currency: \"INR\"\r\n                })}\r\n            </span>{\" / \"}\r\n            <span>Currency: {order.paymentIntent.currency.toUpperCase()}</span>{\" / \"}\r\n            <span>Method: {order.paymentIntent.payment_method_types[0]}</span>{\" / \"}\r\n            <span>Payment: {order.paymentIntent.status.toUpperCase()}</span>{\" / \"}\r\n            <span>Ordered on: {\" / \"}\r\n                {new Date(order.paymentIntent.created * 1000).toLocaleString()}\r\n            </span>{\" / \"}\r\n            {showStatus && (\r\n                <span className=\"badge bg-primary text-white\">STATUS: {order.orderStatus}</span>\r\n            )}\r\n        </p>\r\n    </div>\r\n)\r\n\r\nexport default ShowPaymentInfo","import React from 'react'\r\nimport { Document, Page, Text, StyleSheet } from '@react-pdf/renderer'\r\nimport { Table, TableHeader, TableCell, TableBody, DataTableCell } from '@david.kucsai/react-pdf-table'\r\n\r\nconst Invoice = ({ order }) => (\r\n    <Document>\r\n        <Page style={styles.body}>\r\n            <Text style={styles.header} fixed>\r\n                ~ {new Date().toLocaleString()} ~\r\n            </Text>\r\n            <Text style={styles.title}>Order Invoice</Text>\r\n            <Text style={styles.author}>React Redux Ecommerce</Text>\r\n\r\n            <Table>\r\n                <TableHeader>\r\n                    <TableCell>Title</TableCell>\r\n                    <TableCell>Price</TableCell>\r\n                    <TableCell>Count</TableCell>\r\n                    <TableCell>Brand</TableCell>\r\n                    <TableCell>Color</TableCell>\r\n                </TableHeader>\r\n            </Table>\r\n\r\n            <Table data={order.products}>\r\n                <TableBody>\r\n                    <DataTableCell getContent={(x) => x.product.title} />\r\n                    <DataTableCell getContent={(x) => `$${x.product.price}`} />\r\n                    <DataTableCell getContent={(x) => x.count} />\r\n                    <DataTableCell getContent={(x) => x.product.brand} />\r\n                    <DataTableCell getContent={(x) => x.product.color} />\r\n                </TableBody>\r\n            </Table>\r\n\r\n            <Text style={styles.text}>\r\n                <Text>\r\n                    Date: {new Date(order.paymentIntent.created * 1000).toLocaleString()}\r\n                </Text>{\"\\n\"}\r\n                <Text>Order Id: {order.paymentIntent.id}</Text>{\"\\n\"}\r\n                <Text>Order Status: {order.orderStatus}</Text>{\"\\n\"}\r\n                <Text>Total Paid: {order.paymentIntent.amount}</Text>\r\n            </Text>\r\n            <Text style={styles.subtitle}>Order Summary</Text>\r\n\r\n            <Text style={styles.footer}>~ Thank you for shopping with us ~</Text>\r\n        </Page>\r\n    </Document>\r\n)\r\n\r\nconst styles = StyleSheet.create({\r\n    body: {\r\n        paddingTop: 35,\r\n        paddingBottom: 65,\r\n        paddingHorizontal: 35\r\n    },\r\n    title: {\r\n        fontSize: 24,\r\n        textAlign: \"center\"\r\n    },\r\n    author: {\r\n        fontSize: 12,\r\n        textAlign: \"center\",\r\n        marginBottom: 40\r\n    },\r\n    subtitle: {\r\n        fontSize: 18,\r\n        margin: 12\r\n    },\r\n    text: {\r\n        margin: 12,\r\n        fontSize: 14,\r\n        textAlign: \"justify\"\r\n    },\r\n    image: {\r\n        marginVertical: 15,\r\n        marginHorizontal: 100\r\n    },\r\n    header: {\r\n        fontSize: 12,\r\n        marginBottom: 20,\r\n        textAlign: \"center\",\r\n        color: \"grey\"\r\n    },\r\n    footer: {\r\n        padding: \"100px\",\r\n        fontSize: 12,\r\n        marginBottom: 20,\r\n        textAlign: \"center\",\r\n        color: \"grey\"\r\n    },\r\n    pageNumber: {\r\n        position: \"absolute\",\r\n        fontSize: 12,\r\n        bottom: 30,\r\n        left: 0,\r\n        right: 0,\r\n        textAlign: \"center\",\r\n        color: \"grey\"\r\n    }\r\n})\r\n\r\nexport default Invoice","import React, { useEffect, useState } from 'react'\r\nimport UserNav from '../../components/nav/UserNav'\r\nimport { getUserOrders } from '../../functions/user'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { CheckCircleOutlined, CloseCircleOutlined } from '@ant-design/icons'\r\nimport { toast } from 'react-toastify'\r\nimport ShowPaymentInfo from '../../components/cards/ShowPaymentInfo'\r\nimport { PDFDownloadLink } from '@react-pdf/renderer'\r\nimport Invoice from '../../components/order/Invoice'\r\n\r\nconst History = () => {\r\n    const [orders, setOrders] = useState([])\r\n    const { user } = useSelector((state) => ({ ...state }))\r\n\r\n    useEffect(() => {\r\n        loadUserOrders()\r\n    }, [])\r\n\r\n    const loadUserOrders = () =>\r\n        getUserOrders(user.token).then((res) => {\r\n            setOrders(res.data)\r\n        })\r\n\r\n    const showOrderInTable = (order) => (\r\n        <table className=\"table table-bordered\">\r\n            <thead className=\"thead-light\">\r\n                <tr>\r\n                    <th scope=\"col\">Title</th>\r\n                    <th scope=\"col\">Price</th>\r\n                    <th scope=\"col\">Brand</th>\r\n                    <th scope=\"col\">Color</th>\r\n                    <th scope=\"col\">Count</th>\r\n                    <th scope=\"col\">Shipping</th>\r\n                </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n                {order.products.map((p, i) => (\r\n                    <tr key={i}>\r\n                        <td>\r\n                            <p>{p.product.title}</p>\r\n                        </td>\r\n                        <td>{p.product.price}</td>\r\n                        <td>{p.product.brand}</td>\r\n                        <td>{p.color}</td>\r\n                        <td>{p.count}</td>\r\n                        <td>\r\n                            {p.product.shipping === \"Yes\" ? (\r\n                                <CheckCircleOutlined style={{ color: \"green\" }} />\r\n                            ) : (\r\n                                    <CloseCircleOutlined style={{ color: \"red\" }} />\r\n                                )}\r\n                        </td>\r\n                    </tr>\r\n                ))}\r\n            </tbody>\r\n        </table>\r\n    )\r\n\r\n    const showDownloadLink = (order) => (\r\n        <PDFDownloadLink\r\n            document={<Invoice order={order} />}\r\n            fileName=\"invoice.pdf\"\r\n            className=\"btn btn-sm btn-block btn-outline-primary\"\r\n        >\r\n            Download PDF\r\n        </PDFDownloadLink>\r\n\r\n    )\r\n\r\n    const showEachOrders = () =>\r\n        orders.map((order, i) => (\r\n            <div key={i} className=\"m-5 p-3 card\">\r\n                <ShowPaymentInfo order={order} />\r\n                {showOrderInTable(order)}\r\n                <div className=\"row\">\r\n                    <div className=\"col\">\r\n                        {showDownloadLink(order)}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        ))\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <UserNav />\r\n                </div>\r\n                <div className=\"col text-center\">\r\n                    <h4>\r\n                        {orders.length > 0 ? \"User purchase orders\" : \"No purchase orders\"}\r\n                    </h4>\r\n                    {showEachOrders()}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default History","import React, { useState } from 'react'\r\nimport UserNav from '../../components/nav/UserNav'\r\nimport { auth } from '../../firebase'\r\nimport { toast } from 'react-toastify'\r\n\r\nconst Password = () => {\r\n    const [password, setPassword] = useState(\"\")\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n        setLoading(true)\r\n\r\n        await auth.currentUser.updatePassword(password).then(() => {\r\n            setLoading(false)\r\n            setPassword(\"\")\r\n            toast.success(\"Password updated\")\r\n        }).catch((error) => {\r\n            setLoading(false)\r\n            toast.error(error.message)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <UserNav />\r\n                </div>\r\n                <div className=\"col\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-danger\">Loading...</h4>\r\n                    ) : (\r\n                            <h4>Password Update</h4>\r\n                        )}\r\n                    <form onSubmit={handleSubmit}>\r\n                        <div className=\"form-group\">\r\n                            <label>Your Password</label>\r\n                            <input\r\n                                type=\"password\"\r\n                                onChange={(e) => setPassword(e.target.value)}\r\n                                className=\"form-control\"\r\n                                placeholder=\"Enter new password\"\r\n                                disabled={loading}\r\n                                value={password}\r\n                            />\r\n                            <button className=\"btn btn-primary\" disabled={!password || password.length < 6 || loading}>Submit</button>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Password","import React, { useState, useEffect } from 'react'\r\nimport UserNav from '../../components/nav/UserNav'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { getWishlist, removeWishlist } from '../../functions/user'\r\nimport { Link } from 'react-router-dom'\r\nimport { DeleteOutlined } from '@ant-design/icons'\r\n\r\nconst Wishlist = () => {\r\n    const [wishlist, setWishlist] = useState([])\r\n    const { user } = useSelector((state) => ({ ...state }))\r\n\r\n    useEffect(() => {\r\n        loadWishlist()\r\n    }, [])\r\n\r\n    const loadWishlist = () =>\r\n        getWishlist(user.token).then((res) => {\r\n            setWishlist(res.data.wishlist)\r\n        })\r\n\r\n    const handleRemove = (productId) =>\r\n        removeWishlist(productId, user.token).then((res) => {\r\n            loadWishlist()\r\n        })\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <UserNav />\r\n                </div>\r\n                <div className=\"col\">\r\n                    <h4>Wishlist</h4>\r\n                    {wishlist.map((p) => (\r\n                        <div key={p._id} className=\"alert alert-secondary\">\r\n                            <Link to={`/product/${p.slug}`}>{p.title}</Link>\r\n                            <span className=\"btn btn-sm\" onClick={() => handleRemove(p._id)}>\r\n                                <DeleteOutlined className=\"text-danger\" />\r\n                            </span>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Wishlist","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst AdminNav = () => (\r\n    <nav>\r\n        <ul className=\"nav flex-column\">\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/dashboard\" className=\"nav-link\">\r\n                    Dashboard\r\n                </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/product\" className=\"nav-link\">\r\n                    Product\r\n                </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/products\" className=\"nav-link\">\r\n                    Products\r\n                </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/category\" className=\"nav-link\">\r\n                    Category\r\n                </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/sub\" className=\"nav-link\">\r\n                    Sub Category\r\n                </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/admin/coupon\" className=\"nav-link\">\r\n                    Coupon\r\n                </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n                <Link to=\"/user/password\" className=\"nav-link\">\r\n                    Password\r\n                </Link>\r\n            </li>\r\n\r\n        </ul>\r\n    </nav>\r\n)\r\n\r\nexport default AdminNav","import axios from 'axios'\r\n\r\nexport const getOrders = async (authtoken) =>\r\n    await axios.get(`${process.env.REACT_APP_API}/admin/orders`, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n\r\nexport const changeStatus = async (orderId, orderStatus, authtoken) =>\r\n    await axios.put(`${process.env.REACT_APP_API}/admin/order-status`, { orderId, orderStatus }, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })","import React from 'react'\r\nimport { CheckCircleOutlined, CloseCircleOutlined } from '@ant-design/icons'\r\nimport ShowPaymentInfo from '../cards/ShowPaymentInfo'\r\n\r\nconst Orders = ({ orders, handleStatusChange }) => {\r\n    const showOrderInTable = (order) => (\r\n        <table className=\"table table-bordered\">\r\n            <thead className=\"thead-light\">\r\n                <tr>\r\n                    <th scope=\"col\">Title</th>\r\n                    <th scope=\"col\">Price</th>\r\n                    <th scope=\"col\">Brand</th>\r\n                    <th scope=\"col\">Color</th>\r\n                    <th scope=\"col\">Count</th>\r\n                    <th scope=\"col\">Shipping</th>\r\n                </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n                {order.products.map((p, i) => (\r\n                    <tr key={i}>\r\n                        <td>\r\n                            <p>{p.product.title}</p>\r\n                        </td>\r\n                        <td>{p.product.price}</td>\r\n                        <td>{p.product.brand}</td>\r\n                        <td>{p.color}</td>\r\n                        <td>{p.count}</td>\r\n                        <td>\r\n                            {p.product.shipping === \"Yes\" ? (\r\n                                <CheckCircleOutlined style={{ color: \"green\" }} />\r\n                            ) : (\r\n                                    <CloseCircleOutlined style={{ color: \"red\" }} />\r\n                                )}\r\n                        </td>\r\n                    </tr>\r\n                ))}\r\n            </tbody>\r\n        </table>\r\n    )\r\n\r\n    return (\r\n        <div>\r\n            {orders.map((order) => (\r\n                <div key={order._id} className=\"row pb-5\">\r\n                    <div className=\"btn btn-block bg-light\">\r\n                        <ShowPaymentInfo order={order} showStatus={false} />\r\n                        <div className=\"row\">\r\n                            <div className=\"col-md-4\">Delivery Status</div>\r\n                            <div className=\"col-md-8\">\r\n                                <select\r\n                                    onChange={(e) => handleStatusChange(order._id, e.target.value)}\r\n                                    className=\"form-control\"\r\n                                    defaultValue={order.orderStatus}\r\n                                    name=\"status\"\r\n                                >\r\n                                    <option value=\"Not Processed\">Not Processed</option>\r\n                                    <option value=\"Cash On Delivery\">Cash On Delivery</option>\r\n                                    <option value=\"Processing\">Processing</option>\r\n                                    <option value=\"Dispatched\">Dispatched</option>\r\n                                    <option value=\"Cancelled\">Cancelled</option>\r\n                                    <option value=\"Completed\">Completed</option>\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    {showOrderInTable(order)}\r\n                </div>\r\n            ))}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Orders","import React, { useState, useEffect } from 'react'\r\nimport AdminNav from '../../components/nav/AdminNav'\r\nimport { getOrders, changeStatus } from '../../functions/admin'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { toast } from 'react-toastify'\r\nimport Orders from '../../components/order/Orders'\r\n\r\nconst AdminDashboard = () => {\r\n    const [orders, setOrders] = useState([])\r\n    const { user } = useSelector((state) => ({ ...state }))\r\n\r\n    useEffect(() => {\r\n        loadOrders()\r\n    }, [])\r\n\r\n    const loadOrders = () =>\r\n        getOrders(user.token).then((res) => {\r\n            setOrders(res.data)\r\n        })\r\n\r\n    const handleStatusChange = (orderId, orderStatus) => {\r\n        changeStatus(orderId, orderStatus, user.token).then((res) => {\r\n            toast.success(\"Status updated\")\r\n            loadOrders()\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n                <div className=\"col-md-10\">\r\n                    Admin Dashboard\r\n                    <Orders orders={orders} handleStatusChange={handleStatusChange} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AdminDashboard","import React from 'react'\r\n\r\nconst CategoryForm = ({ handleSubmit, setName, name }) => (\r\n    <form onSubmit={handleSubmit}>\r\n        <div className=\"form-group\">\r\n            <label>Name</label>\r\n            <input\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                onChange={(e) => setName(e.target.value)}\r\n                value={name}\r\n                autoFocus\r\n                required\r\n            />\r\n            <button className=\"btn btn-outline-primary\">Save</button>\r\n        </div>\r\n    </form>\r\n)\r\n\r\n\r\nexport default CategoryForm","import React from 'react'\r\n\r\nconst LocalSearch = ({ keyword, setKeyword }) => {\r\n    const handleSearchChange = (e) => {\r\n        e.preventDefault()\r\n        setKeyword(e.target.value.toLowerCase())\r\n    }\r\n\r\n    return (\r\n        <div className=\"container pt-4 pb-4\">\r\n            <input\r\n                type=\"search\"\r\n                placeholder=\"Filter\"\r\n                value={keyword}\r\n                onChange={handleSearchChange}\r\n                className=\"form-control mb-4\"\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LocalSearch","import React, { useState, useEffect } from 'react'\r\nimport AdminNav from '../../../components/nav/AdminNav'\r\nimport { toast } from 'react-toastify'\r\nimport { useSelector } from 'react-redux'\r\nimport { createCategory, getCategories, removeCategory } from '../../../functions/category'\r\nimport { Link } from 'react-router-dom'\r\nimport { EditOutlined, DeleteOutlined } from '@ant-design/icons'\r\nimport CategoryForm from '../../../components/forms/CategoryForm'\r\nimport LocalSearch from '../../../components/forms/LocalSearch'\r\n\r\nconst CategoryCreate = () => {\r\n    const { user } = useSelector((state) => ({ ...state }))\r\n\r\n    const [name, setName] = useState(\"\")\r\n    const [loading, setLoading] = useState(false)\r\n    const [categories, setCategories] = useState([])\r\n\r\n    const [keyword, setKeyword] = useState(\"\")\r\n\r\n    useEffect(() => {\r\n        loadCategories()\r\n    }, [])\r\n\r\n    const loadCategories = () => {\r\n        getCategories().then((c) => setCategories(c.data))\r\n    }\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        setLoading(true)\r\n        createCategory({ name }, user.token)\r\n            .then((res) => {\r\n                setLoading(false)\r\n                setName(\"\")\r\n                toast.success(\"Category is created\")\r\n                loadCategories()\r\n            }).catch((err) => {\r\n                console.log(err)\r\n                setLoading(false)\r\n                toast.error(err.message)\r\n            })\r\n    }\r\n\r\n    const handleRemove = async (slug) => {\r\n        if (window.confirm(\"Deleted?\")) {\r\n            setLoading(true)\r\n            removeCategory(slug, user.token)\r\n                .then((res) => {\r\n                    setLoading(false)\r\n                    toast.error('Category deleted')\r\n                    loadCategories()\r\n                })\r\n                .catch((err) => {\r\n\r\n                    setLoading(false)\r\n                    toast.error(err.message)\r\n\r\n                })\r\n        }\r\n    }\r\n\r\n    const searched = (keyword) => (c) => c.name.toLowerCase().includes(keyword)\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n                <div className=\"col\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-danger\">loading...</h4>\r\n                    ) : (\r\n                            <h4>Create Category</h4>\r\n                        )}\r\n                    <CategoryForm\r\n                        handleSubmit={handleSubmit}\r\n                        setName={setName}\r\n                        name={name}\r\n                    />\r\n\r\n                    <LocalSearch keyword={keyword} setKeyword={setKeyword} />\r\n\r\n                    {categories.filter(searched(keyword)).map((c) => (\r\n                        <div className=\"alert alert-secondary\" key={c._id}>\r\n                            {c.name}\r\n                            <span onClick={() => handleRemove(c.slug)} className=\"btn btn-sm float-right\">\r\n                                <DeleteOutlined className=\"text-danger\" />\r\n                            </span>\r\n                            <Link to={`/admin/category/${c.slug}`}>\r\n                                <span className=\"btn btn-sm float-right\">\r\n                                    <EditOutlined className=\"text-warning\" />\r\n                                </span>\r\n                            </Link>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CategoryCreate","import React, { useState, useEffect } from 'react'\r\nimport AdminNav from '../../../components/nav/AdminNav'\r\nimport { toast } from 'react-toastify'\r\nimport { useSelector } from 'react-redux'\r\nimport { updateCategory, getCategory } from '../../../functions/category'\r\nimport CategoryForm from '../../../components/forms/CategoryForm'\r\n\r\nconst CategoryUpdate = ({ history, match }) => {\r\n    const { user } = useSelector((state) => ({ ...state }))\r\n\r\n    const [name, setName] = useState(\"\")\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    useEffect(() => {\r\n        loadCategory()\r\n    }, [])\r\n\r\n    const loadCategory = () =>\r\n        getCategory(match.params.slug).then((c) => setName(c.data.name));\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        setLoading(true)\r\n        updateCategory(match.params.slug, { name }, user.token)\r\n            .then((res) => {\r\n                setLoading(false)\r\n                setName(\"\")\r\n                toast.success('Category is updated')\r\n                history.push(\"/admin/category\")\r\n            }).catch((err) => {\r\n                console.log(err)\r\n                setLoading(false)\r\n                toast.error(err.message)\r\n            })\r\n    }\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n                <div className=\"col\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-danger\">loading...</h4>\r\n                    ) : (\r\n                            <h4>Update Category</h4>\r\n                        )}\r\n                    <CategoryForm\r\n                        handleSubmit={handleSubmit}\r\n                        name={name}\r\n                        setName={setName}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CategoryUpdate","import React, { useState, useEffect } from 'react'\r\nimport AdminNav from '../../../components/nav/AdminNav'\r\nimport { toast } from 'react-toastify'\r\nimport { useSelector } from 'react-redux'\r\nimport { getCategories } from '../../../functions/category'\r\nimport { createSub, getSub, removeSub, getSubs } from '../../../functions/sub'\r\nimport { Link } from 'react-router-dom'\r\nimport { EditOutlined, DeleteOutlined } from '@ant-design/icons'\r\nimport CategoryForm from '../../../components/forms/CategoryForm'\r\nimport LocalSearch from '../../../components/forms/LocalSearch'\r\n\r\nconst SubCreate = () => {\r\n    const { user } = useSelector((state) => ({ ...state }))\r\n\r\n    const [name, setName] = useState(\"\")\r\n    const [loading, setLoading] = useState(false)\r\n    const [categories, setCategories] = useState([])\r\n    const [category, setCategory] = useState(\"\")\r\n    const [subs, setSubs] = useState([])\r\n\r\n    const [keyword, setKeyword] = useState(\"\")\r\n\r\n    useEffect(() => {\r\n        loadCategories()\r\n        loadSubs()\r\n    }, [])\r\n\r\n    const loadCategories = () =>\r\n        getCategories().then((c) => setCategories(c.data))\r\n\r\n\r\n    const loadSubs = () =>\r\n        getSubs().then((s) => setSubs(s.data))\r\n\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        //console.log(name)\r\n        setLoading(true)\r\n        createSub({ name, parent: category }, user.token)\r\n            .then((res) => {\r\n                setLoading(false)\r\n                setName(\"\")\r\n                toast.success('Sub category is created')\r\n                loadSubs()\r\n            }).catch((err) => {\r\n                console.log(err)\r\n                setLoading(false)\r\n                toast.error(err.message)\r\n            })\r\n    }\r\n\r\n    const handleRemove = async (slug) => {\r\n        if (window.confirm(\"Deleted?\")) {\r\n            setLoading(true)\r\n            removeSub(slug, user.token)\r\n                .then((res) => {\r\n                    setLoading(false)\r\n                    toast.error('Sub category deleted')\r\n                    loadSubs()\r\n                })\r\n                .catch((err) => {\r\n                    setLoading(false)\r\n                    toast.error(err.message)\r\n                })\r\n        }\r\n    }\r\n\r\n    const searched = (keyword) => (c) => c.name.toLowerCase().includes(keyword)\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n                <div className=\"col\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-danger\">loading...</h4>\r\n                    ) : (\r\n                            <h4>Create Sub Category</h4>\r\n                        )}\r\n\r\n                    <div className=\"form-group\">\r\n                        <label>Parent Category</label>\r\n                        <select\r\n                            name=\"category\"\r\n                            className=\"form-control\"\r\n                            onChange={(e) => setCategory(e.target.value)}\r\n                        >\r\n                            <option>Please Select</option>\r\n                            {categories.length > 0 &&\r\n                                categories.map((c) => (\r\n                                    <option key={c._id} value={c._id}>\r\n                                        {c.name}\r\n                                    </option>\r\n                                ))}\r\n                        </select>\r\n                    </div>\r\n                    <CategoryForm\r\n                        handleSubmit={handleSubmit}\r\n                        setName={setName}\r\n                        name={name}\r\n                    />\r\n\r\n                    <LocalSearch keyword={keyword} setKeyword={setKeyword} />\r\n                    <hr />\r\n                    {subs.filter(searched(keyword)).map((s) => (\r\n                        <div className=\"alert alert-secondary\" key={s._id}>\r\n                            {s.name}\r\n                            <span onClick={() => handleRemove(s.slug)} className=\"btn btn-sm float-right\">\r\n                                <DeleteOutlined className=\"text-warning\" />\r\n                            </span>\r\n                            <Link to={`/admin/sub/${s.slug}`}>\r\n                                <span className=\"btn btn-sm float-right\">\r\n                                    <EditOutlined className=\"text-warning\" />\r\n                                </span>\r\n                            </Link>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SubCreate","import React, { useState, useEffect } from 'react'\r\nimport AdminNav from '../../../components/nav/AdminNav'\r\nimport { toast } from 'react-toastify'\r\nimport { useSelector } from 'react-redux'\r\nimport { getCategories } from '../../../functions/category'\r\nimport { getSub, updateSub } from '../../../functions/sub'\r\nimport CategoryForm from '../../../components/forms/CategoryForm'\r\n\r\nconst SubUpdate = ({ match, history }) => {\r\n    const { user } = useSelector((state) => ({ ...state }))\r\n\r\n    const [name, setName] = useState(\"\")\r\n    const [loading, setLoading] = useState(false)\r\n    const [categories, setCategories] = useState([])\r\n    const [parent, setParent] = useState(\"\")\r\n\r\n    useEffect(() => {\r\n        loadCategories()\r\n        loadSub()\r\n    }, [])\r\n\r\n    const loadCategories = () =>\r\n        getCategories().then((c) => setCategories(c.data))\r\n\r\n\r\n    const loadSub = () =>\r\n        getSub(match.params.slug).then((s) => {\r\n            setName(s.data.name)\r\n            setParent(s.data.parent)\r\n        })\r\n\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        setLoading(true)\r\n        updateSub(match.params.slug, { name, parent }, user.token)\r\n            .then((res) => {\r\n                setLoading(false)\r\n                setName(\"\")\r\n                toast.success('Sub category is updated')\r\n                history.push(\"/admin/sub\")\r\n            }).catch((err) => {\r\n                console.log(err)\r\n                setLoading(false)\r\n                toast.error(err.message)\r\n            })\r\n    }\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n                <div className=\"col\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-danger\">loading...</h4>\r\n                    ) : (\r\n                            <h4>Update Sub Category</h4>\r\n                        )}\r\n\r\n                    <div className=\"form-group\">\r\n                        <label>Parent Category</label>\r\n                        <select\r\n                            name=\"category\"\r\n                            className=\"form-control\"\r\n                            onChange={(e) => setParent(e.target.value)}\r\n                        >\r\n                            <option value=\"\">Select Category</option>\r\n                            {categories.length > 0 &&\r\n                                categories.map((c) => (\r\n                                    <option key={c._id} value={c._id} selected={c._id === parent}>\r\n                                        {c.name}\r\n                                    </option>\r\n                                ))}\r\n                        </select>\r\n                    </div>\r\n                    <CategoryForm\r\n                        handleSubmit={handleSubmit}\r\n                        setName={setName}\r\n                        name={name}\r\n                    />\r\n                    <hr />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SubUpdate","import React from 'react'\r\nimport { Select } from 'antd'\r\n\r\nconst { Option } = Select\r\n\r\nconst ProductCreateForm = ({\r\n    handleSubmit,\r\n    handleChange,\r\n    setValues,\r\n    values,\r\n    handleCategoryChange,\r\n    subOptions,\r\n    showSub,\r\n}) => {\r\n    const {\r\n        title,\r\n        description,\r\n        price,\r\n        categories,\r\n        category,\r\n        subs,\r\n        shipping,\r\n        quantity,\r\n        images,\r\n        colors,\r\n        brands,\r\n        color,\r\n        brand\r\n    } = values\r\n\r\n    return (\r\n\r\n        <form onSubmit={handleSubmit}>\r\n            <div className=\"form-group\">\r\n                <label>Title</label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"title\"\r\n                    value={title}\r\n                    onChange={handleChange}\r\n                    className=\"form-control\"\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Description</label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"description\"\r\n                    value={description}\r\n                    onChange={handleChange}\r\n                    className=\"form-control\"\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Price</label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"price\"\r\n                    value={price}\r\n                    onChange={handleChange}\r\n                    className=\"form-control\"\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Shipping</label>\r\n                <select name=\"shipping\" className=\"form-control\" onChange={handleChange}>\r\n                    <option>Please Select</option>\r\n                    <option value=\"No\">No</option>\r\n                    <option value=\"Yes\">Yes</option>\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Quantity</label>\r\n                <input\r\n                    type=\"number\"\r\n                    name=\"quantity\"\r\n                    value={quantity}\r\n                    onChange={handleChange}\r\n                    className=\"form-control\"\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Color</label>\r\n                <select name=\"color\" className=\"form-control\" onChange={handleChange}>\r\n                    <option>Please Select</option>\r\n                    {colors.map((c) => (\r\n                        <option key={c} value={c}>\r\n                            {c}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>brand</label>\r\n                <select name=\"brand\" className=\"form-control\" onChange={handleChange}>\r\n                    <option>Please Select</option>\r\n                    {brands.map((b) => (\r\n                        <option key={b} value={b}>\r\n                            {b}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Category</label>\r\n                <select\r\n                    name=\"category\"\r\n                    className=\"form-control\"\r\n                    onChange={handleCategoryChange}\r\n                >\r\n                    <option>Please Select</option>\r\n                    {categories.length > 0 &&\r\n                        categories.map((c) => (\r\n                            <option key={c._id} value={c._id}>\r\n                                {c.name}\r\n                            </option>\r\n                        ))}\r\n                </select>\r\n            </div>\r\n\r\n            {showSub && (\r\n                <div>\r\n                    <label>Sub Categories</label>\r\n                    <Select\r\n                        mode=\"multiple\"\r\n                        style={{ width: \"100%\" }}\r\n                        placeholder=\"Please Select\"\r\n                        value={subs}\r\n                        onChange={(value) => setValues({ ...values, subs: value })}\r\n                    >\r\n                        {subOptions.length &&\r\n                            subOptions.map((s) => (\r\n                                <Option key={s._id} value={s._id}>\r\n                                    {s.name}\r\n                                </Option>\r\n                            ))}\r\n                    </Select>\r\n                </div>\r\n            )}\r\n\r\n\r\n            <button className=\"btn btn-outline-info\">Save</button>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default ProductCreateForm","import React from 'react'\r\nimport Resizer from 'react-image-file-resizer'\r\nimport axios from 'axios'\r\nimport { useSelector } from 'react-redux'\r\nimport { Avatar, Badge } from 'antd'\r\n\r\nconst FileUpload = ({ values, setValues, setLoading }) => {\r\n    const { user } = useSelector((state) => ({ ...state }))\r\n\r\n    const fileUploadAndResize = (e) => {\r\n        let files = e.target.files\r\n        let allUploadedFiles = values.images\r\n\r\n        if (files) {\r\n            setLoading(true)\r\n            for (let i = 0; i < files.length; i++) {\r\n                Resizer.imageFileResizer(files[i], 720, 720, \"JPEG\", 100, 0, (uri) => {\r\n                    axios.post(`${process.env.REACT_APP_API}/uploadimages`, { image: uri }, {\r\n                        headers: {\r\n                            authtoken: user ? user.token : \"\"\r\n                        }\r\n                    }).then((res) => {\r\n                        setLoading(false)\r\n                        allUploadedFiles.push(res.data)\r\n                        setValues({ ...values, images: allUploadedFiles })\r\n                    }).catch((err) => {\r\n                        setLoading(false)\r\n                        console.log(\"CLOUDINARY UPLOAD ERR\", err)\r\n                    })\r\n                }, \"base64\")\r\n            }\r\n        }\r\n    }\r\n\r\n    const handleImageRemove = (public_id) => {\r\n        setLoading(true)\r\n        axios.post(`${process.env.REACT_APP_API}/removeimage`, { public_id }, {\r\n            headers: {\r\n                authtoken: user ? user.token : \"\"\r\n            }\r\n        }).then((res) => {\r\n            setLoading(false)\r\n            const { images } = values\r\n            let filteredImages = images.filter((item) => {\r\n                return item.public_id !== public_id\r\n            })\r\n            setValues({ ...values, images: filteredImages })\r\n        }).catch((err) => {\r\n            console.log(err)\r\n            setLoading(false)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"row\">\r\n                {values.images &&\r\n                    values.images.map((image) => (\r\n                        <Badge\r\n                            key={image.public_id}\r\n                            count=\"X\"\r\n                            onClick={() => handleImageRemove(image.public_id)}\r\n                            style={{ cursor: \"pointer\" }}\r\n                        >\r\n                            <Avatar\r\n                                src={image.url}\r\n                                size={100}\r\n                                shape=\"square\"\r\n                                className=\"ml-3\"\r\n                            />\r\n                        </Badge>\r\n                    ))}\r\n            </div>\r\n            <div className=\"row\">\r\n                <label className=\"btn btn-primary btn-raised mt-3\">\r\n                    Choose File\r\n                <input\r\n                        type=\"file\"\r\n                        multiple\r\n                        hidden\r\n                        accept=\"images/*\"\r\n                        onChange={fileUploadAndResize}\r\n                    />\r\n                </label>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FileUpload","import React, { useState, useEffect } from 'react'\r\nimport AdminNav from '../../../components/nav/AdminNav'\r\nimport { toast } from 'react-toastify'\r\nimport { useSelector } from 'react-redux'\r\nimport { createProduct } from '../../../functions/product'\r\nimport ProductCreateForm from '../../../components/forms/ProductCreateForm'\r\nimport { getCategories, getCategorySubs } from '../../../functions/category'\r\nimport FileUpload from '../../../components/forms/FileUpload'\r\nimport { LoadingOutlined } from '@ant-design/icons'\r\n\r\nconst initialState = {\r\n    title: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    categories: [],\r\n    category: \"\",\r\n    subs: [],\r\n    shipping: \"\",\r\n    quantity: \"\",\r\n    images: [],\r\n    colors: [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"],\r\n    brands: [\"Apple\", \"Samsung\", \"Microsoft\", \"Lenovo\", \"ASUS\"],\r\n    color: \"\",\r\n    brand: \"\"\r\n}\r\n\r\nconst ProductCreate = () => {\r\n    const [values, setValues] = useState(initialState)\r\n    const [subOptions, setSubOptions] = useState([])\r\n    const [showSub, setShowSub] = useState(false)\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const { user } = useSelector((state) => ({ ...state }))\r\n\r\n    useEffect(() => {\r\n        loadCategories()\r\n    }, [])\r\n\r\n    const loadCategories = () =>\r\n        getCategories().then((c) => setValues({ ...values, categories: c.data }))\r\n\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        createProduct(values, user.token)\r\n            .then((res) => {\r\n                console.log(res)\r\n                toast.success('Product is created')\r\n            })\r\n            .catch((err) => {\r\n                console.log(err)\r\n                toast.error(err.message)\r\n            })\r\n    }\r\n\r\n    const handleChange = (e) => {\r\n        setValues({ ...values, [e.target.name]: e.target.value })\r\n    }\r\n\r\n    const handleCategoryChange = (e) => {\r\n        e.preventDefault()\r\n        setValues({ ...values, subs: [], category: e.target.value })\r\n        getCategorySubs(e.target.value).then((res) => {\r\n            setSubOptions(res.data)\r\n        })\r\n        setShowSub(true)\r\n    }\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n\r\n                <div className=\"col-md-10\">\r\n                    {loading ? (\r\n                        <LoadingOutlined className=\"text-danger\" />\r\n                    ) : (\r\n                            <h4>Product Create</h4>\r\n                        )}\r\n                    <div className=\"p-3\">\r\n                        <FileUpload\r\n                            values={values}\r\n                            setValues={setValues}\r\n                            setLoading={setLoading}\r\n                        />\r\n                    </div>\r\n                    <ProductCreateForm\r\n                        handleSubmit={handleSubmit}\r\n                        handleChange={handleChange}\r\n                        setValues={setValues}\r\n                        values={values}\r\n                        handleCategoryChange={handleCategoryChange}\r\n                        subOptions={subOptions}\r\n                        showSub={showSub}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProductCreate","import React from 'react'\r\nimport { Card } from 'antd'\r\nimport { EditOutlined, DeleteOutlined } from '@ant-design/icons'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst { Meta } = Card\r\n\r\nconst AdminProductCard = ({ product, handleRemove }) => {\r\n    const { title, description, images, slug } = product\r\n\r\n    return (\r\n        <Card cover={\r\n            <img\r\n                src={images && images.length ? images[0].url : \"\"}\r\n                style={{ height: \"150px\", objectFit: \"cover\" }}\r\n                className=\"p-1\"\r\n            />\r\n        }\r\n            actions={[\r\n                <Link to={`/admin/product/${slug}`}>\r\n                    <EditOutlined className=\"text-warning\" />\r\n                </Link>,\r\n                <DeleteOutlined onClick={() => handleRemove(slug)} className=\"text-danger\" />\r\n            ]}\r\n        >\r\n            <Meta title={title} description={`${description && description.substring(0, 40)}...`} />\r\n        </Card>\r\n    )\r\n}\r\n\r\nexport default AdminProductCard","import React, { useState, useEffect } from 'react'\r\nimport AdminNav from '../../../components/nav/AdminNav'\r\nimport { getProductByCount, removeProduct } from '../../../functions/product'\r\nimport AdminProductCard from '../../../components/cards/AdminProductCard'\r\nimport { toast } from 'react-toastify'\r\nimport { useSelector } from 'react-redux'\r\n\r\nconst AllProducts = () => {\r\n    const [products, setProducts] = useState([])\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const { user } = useSelector((state) => ({ ...state }))\r\n\r\n    useEffect(() => {\r\n        loadAllProducts()\r\n    }, [])\r\n\r\n    const loadAllProducts = () => {\r\n        setLoading(true)\r\n        getProductByCount(100)\r\n            .then((res) => {\r\n                setProducts(res.data)\r\n                setLoading(false)\r\n            }).catch((err) => {\r\n                setLoading(false)\r\n                console.log(err)\r\n            })\r\n    }\r\n\r\n    const handleRemove = (slug) => {\r\n        if (window.confirm(\"Delete?\")) {\r\n            removeProduct(slug, user.token)\r\n                .then(() => {\r\n                    loadAllProducts()\r\n                    toast.error(\"Product is deleted\")\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err)\r\n                    toast.error(err.message)\r\n                })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n                <div className=\"col\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-danger\">Loading...</h4>\r\n                    ) : (\r\n                            <h4>All Products</h4>\r\n                        )}\r\n                    <div className=\"row\">\r\n                        {products.map((product) => (\r\n                            <div className=\"col-md-4 pb-3\" key={product._id}>\r\n                                <AdminProductCard product={product} handleRemove={handleRemove} />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AllProducts","import React from 'react'\r\nimport { Select } from 'antd'\r\n\r\nconst { Option } = Select\r\n\r\nconst ProductUpdateForm = ({\r\n    handleSubmit,\r\n    handleChange,\r\n    setValues,\r\n    values,\r\n    handleCategoryChange,\r\n    categories,\r\n    subOptions,\r\n    arrayOfSubs,\r\n    setArrayOfSubs,\r\n    selectedCategory\r\n}) => {\r\n    const {\r\n        title,\r\n        description,\r\n        price,\r\n        category,\r\n        subs,\r\n        shipping,\r\n        quantity,\r\n        images,\r\n        colors,\r\n        brands,\r\n        color,\r\n        brand\r\n    } = values\r\n\r\n    return (\r\n\r\n        <form onSubmit={handleSubmit}>\r\n            <div className=\"form-group\">\r\n                <label>Title</label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"title\"\r\n                    value={title}\r\n                    onChange={handleChange}\r\n                    className=\"form-control\"\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Description</label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"description\"\r\n                    value={description}\r\n                    onChange={handleChange}\r\n                    className=\"form-control\"\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Price</label>\r\n                <input\r\n                    type=\"text\"\r\n                    name=\"price\"\r\n                    value={price}\r\n                    onChange={handleChange}\r\n                    className=\"form-control\"\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Shipping</label>\r\n                <select\r\n                    value={shipping === \"Yes\" ? \"Yes\" : \"No\"}\r\n                    name=\"shipping\"\r\n                    className=\"form-control\"\r\n                    onChange={handleChange}\r\n                >\r\n                    <option>Please Select</option>\r\n                    <option value=\"No\">No</option>\r\n                    <option value=\"Yes\">Yes</option>\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Quantity</label>\r\n                <input\r\n                    type=\"number\"\r\n                    name=\"quantity\"\r\n                    value={quantity}\r\n                    onChange={handleChange}\r\n                    className=\"form-control\"\r\n                />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Color</label>\r\n                <select\r\n                    value={color}\r\n                    name=\"color\"\r\n                    className=\"form-control\"\r\n                    onChange={handleChange}\r\n                >\r\n                    <option>Please Select</option>\r\n                    {colors.map((c) => (\r\n                        <option key={c} value={c}>\r\n                            {c}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>brand</label>\r\n                <select\r\n                    value={brand}\r\n                    name=\"brand\"\r\n                    className=\"form-control\"\r\n                    onChange={handleChange}\r\n                >\r\n                    <option>Please Select</option>\r\n                    {brands.map((b) => (\r\n                        <option key={b} value={b}>\r\n                            {b}\r\n                        </option>\r\n                    ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n                <label>Category</label>\r\n                <select\r\n                    name=\"category\"\r\n                    className=\"form-control\"\r\n                    onChange={handleCategoryChange}\r\n                    value={selectedCategory ? selectedCategory : category._id}\r\n                >\r\n                    {categories.length > 0 &&\r\n                        categories.map((c) => (\r\n                            <option key={c._id} value={c._id}>\r\n                                {c.name}\r\n                            </option>\r\n                        ))}\r\n                </select>\r\n            </div>\r\n\r\n            <div>\r\n                <label>Sub Categories</label>\r\n                <Select\r\n                    mode=\"multiple\"\r\n                    style={{ width: \"100%\" }}\r\n                    placeholder=\"Please Select\"\r\n                    value={arrayOfSubs}\r\n                    onChange={(value) => setArrayOfSubs(value)}\r\n                >\r\n                    {subOptions.length &&\r\n                        subOptions.map((s) => (\r\n                            <Option key={s._id} value={s._id}>\r\n                                {s.name}\r\n                            </Option>\r\n                        ))}\r\n                </Select>\r\n            </div>\r\n\r\n            <br />\r\n            <button className=\"btn btn-outline-info\">Save</button>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default ProductUpdateForm","import React, { useState, useEffect } from 'react'\r\nimport AdminNav from '../../../components/nav/AdminNav'\r\nimport { toast } from 'react-toastify'\r\nimport { useSelector } from 'react-redux'\r\nimport { getProduct, updateProduct } from '../../../functions/product'\r\nimport { getCategories, getCategorySubs } from '../../../functions/category'\r\nimport FileUpload from '../../../components/forms/FileUpload'\r\nimport { LoadingOutlined } from '@ant-design/icons'\r\nimport ProductUpdateForm from '../../../components/forms/ProductUpdateForm'\r\n\r\nconst initialState = {\r\n    title: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    category: \"\",\r\n    subs: [],\r\n    shipping: \"\",\r\n    quantity: \"\",\r\n    images: [],\r\n    colors: [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"],\r\n    brands: [\"Apple\", \"Samsung\", \"Microsoft\", \"Lenovo\", \"ASUS\"],\r\n    color: \"\",\r\n    brand: \"\"\r\n}\r\n\r\nconst ProductUpdate = ({ match, history }) => {\r\n    const { user } = useSelector((state) => ({ ...state }))\r\n\r\n    const [values, setValues] = useState(initialState)\r\n    const [subOptions, setSubOptions] = useState([])\r\n    const [categories, setCategories] = useState([])\r\n    const [arrayOfSubs, setArrayOfSubs] = useState([])\r\n    const [selectedCategory, setSelectedCategory] = useState(\"\")\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const { slug } = match.params\r\n\r\n    useEffect(() => {\r\n        loadProduct()\r\n        loadCategories()\r\n    }, [])\r\n\r\n    const loadProduct = () => {\r\n        getProduct(slug).then((p) => {\r\n            setValues({ ...values, ...p.data })\r\n            getCategorySubs(p.data.category._id).then((res) => {\r\n                setSubOptions(res.data)\r\n            })\r\n            let arr = []\r\n            p.data.subs.map((s) => {\r\n                arr.push(s._id)\r\n            })\r\n            setArrayOfSubs((prev) => arr)\r\n        })\r\n    }\r\n\r\n    const loadCategories = () =>\r\n        getCategories().then((c) => setCategories(c.data))\r\n\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        setLoading(true)\r\n\r\n        values.subs = arrayOfSubs\r\n        values.category = selectedCategory ? selectedCategory : values.category\r\n\r\n        updateProduct(slug, values, user.token)\r\n            .then((res) => {\r\n                setLoading(false)\r\n                toast.success(\"Product is updated\")\r\n                history.push(\"/admin/products\")\r\n            })\r\n            .catch((err) => {\r\n                console.log(err)\r\n                setLoading(false)\r\n                toast.error(err.message)\r\n            })\r\n    }\r\n\r\n    const handleChange = (e) => {\r\n        setValues({ ...values, [e.target.name]: e.target.value })\r\n    }\r\n\r\n    const handleCategoryChange = (e) => {\r\n        e.preventDefault()\r\n        setValues({ ...values, subs: [] })\r\n\r\n        setSelectedCategory(e.target.value)\r\n\r\n        getCategorySubs(e.target.value).then((res) => {\r\n            setSubOptions(res.data)\r\n        })\r\n        if (values.category._id === e.target.value) {\r\n            loadProduct()\r\n        }\r\n        setArrayOfSubs([])\r\n    }\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n\r\n                <div className=\"col-md-10\">\r\n                    {loading ? (\r\n                        <LoadingOutlined className=\"text-danger\" />\r\n                    ) : (\r\n                            <h4>Product Update</h4>\r\n                        )}\r\n                    <div className=\"p-3\">\r\n                        <FileUpload\r\n                            values={values}\r\n                            setValues={setValues}\r\n                            setLoading={setLoading}\r\n                        />\r\n                    </div>\r\n                    <ProductUpdateForm\r\n                        handleSubmit={handleSubmit}\r\n                        handleChange={handleChange}\r\n                        setValues={setValues}\r\n                        values={values}\r\n                        handleCategoryChange={handleCategoryChange}\r\n                        categories={categories}\r\n                        subOptions={subOptions}\r\n                        arrayOfSubs={arrayOfSubs}\r\n                        setArrayOfSubs={setArrayOfSubs}\r\n                        selectedCategory={selectedCategory}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProductUpdate","import axios from 'axios'\r\n\r\nexport const getCoupons = async () =>\r\n    await axios.get(`${process.env.REACT_APP_API}/coupons`)\r\n\r\nexport const removeCoupon = async (couponId, authtoken) =>\r\n    await axios.delete(`${process.env.REACT_APP_API}/coupon/${couponId}`, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })\r\n\r\nexport const createCoupon = async (coupon, authtoken) =>\r\n    await axios.post(`${process.env.REACT_APP_API}/coupon`, { coupon }, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })","import React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { toast } from 'react-toastify'\r\nimport { getCoupons, removeCoupon, createCoupon } from '../../../functions/coupon'\r\nimport DatePicker from 'react-datepicker'\r\nimport \"react-datepicker/dist/react-datepicker.css\"\r\nimport { DeleteOutlined } from '@ant-design/icons'\r\nimport AdminNav from '../../../components/nav/AdminNav'\r\n\r\nconst CreateCouponPage = () => {\r\n    const [name, setName] = useState(\"\")\r\n    const [expiry, setExpiry] = useState(\"\")\r\n    const [discount, setDiscount] = useState(\"\")\r\n    const [loading, setLoading] = useState(false)\r\n    const [coupons, setCoupons] = useState([])\r\n\r\n    const { user } = useSelector((state) => ({ ...state }))\r\n\r\n    useEffect(() => {\r\n        loadAllCoupons()\r\n    }, [])\r\n\r\n    const loadAllCoupons = () => getCoupons().then((res) => setCoupons(res.data))\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault()\r\n        setLoading(true)\r\n        createCoupon({ name, expiry, discount }, user.token)\r\n            .then((res) => {\r\n                setLoading(false)\r\n                loadAllCoupons()\r\n                setName(\"\")\r\n                setDiscount(\"\")\r\n                setExpiry(\"\")\r\n                toast.success(`\"${res.data.name}\" is created`)\r\n            })\r\n            .catch((err) => console.log(\"create coupon err\", err))\r\n    }\r\n\r\n    const handleRemove = (couponId) => {\r\n        if (window.confirm(\"Delete?\")) {\r\n            setLoading(true)\r\n            removeCoupon(couponId, user.token)\r\n                .then((res) => {\r\n                    loadAllCoupons()\r\n                    setLoading(false)\r\n                    toast.error(`Coupon \"${res.data.name}\" deleted`)\r\n                })\r\n                .catch((err) => console.log(err))\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-2\">\r\n                    <AdminNav />\r\n                </div>\r\n                <div className=\"col-md-10\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-danger\">Loading...</h4>\r\n                    ) : (\r\n                            <h4>Coupon</h4>\r\n                        )}\r\n                    <form onSubmit={handleSubmit}>\r\n                        <div className=\"form-group\">\r\n                            <label className=\"text-muted\">Name</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                className=\"form-control\"\r\n                                onChange={(e) => setName(e.target.value)}\r\n                                value={name}\r\n                                autoFocus\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label className=\"text-muted\">Discount %</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                className=\"form-control\"\r\n                                onChange={(e) => setDiscount(e.target.value)}\r\n                                value={discount}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label className=\"text-muted\">Expiry</label>\r\n                            <br />\r\n                            <DatePicker\r\n                                className=\"form-control\"\r\n                                selected={new Date()}\r\n                                value={expiry}\r\n                                onChange={(date) => setExpiry(date)}\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <button className=\"btn btn-outline-primary\">Save</button>\r\n                    </form>\r\n\r\n                    <br />\r\n                    <h4>{coupons.length}Coupons</h4>\r\n                    <table className=\"table table-bordered\">\r\n                        <thead className=\"thead-light\">\r\n                            <tr>\r\n                                <th scope=\"col\">Name</th>\r\n                                <th scope=\"col\">Expiry</th>\r\n                                <th scope=\"col\">Discount</th>\r\n                                <th scope=\"col\">Action</th>\r\n                            </tr>\r\n                        </thead>\r\n\r\n                        <tbody>\r\n                            {coupons.map((c) => (\r\n                                <tr key={c._id}>\r\n                                    <td>{c.name}</td>\r\n                                    <td>{new Date(c.expiry).toLocaleDateString()}</td>\r\n                                    <td>{c.discount}%</td>\r\n                                    <td>\r\n                                        <DeleteOutlined\r\n                                            onClick={() => handleRemove(c._id)}\r\n                                            className=\"text-danger pointer\"\r\n                                        />\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CreateCouponPage","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nconst ProductListItems = ({ product }) => {\r\n    const {\r\n        price,\r\n        category,\r\n        subs,\r\n        shipping,\r\n        color,\r\n        brand,\r\n        quantity,\r\n        sold\r\n    } = product\r\n\r\n    return (\r\n        <ul className=\"list-group\">\r\n            <li className=\"list-group-item\">\r\n                Price{\" \"}\r\n                <span className=\"label label-default label-pill pull-xs-right\">\r\n                    $ {price}\r\n                </span>\r\n            </li>\r\n\r\n            {category && (\r\n                <li className=\"list-group-item\">\r\n                    Category{\" \"}\r\n                    <Link to={`/category/${category.slug}`} className=\"label label-default label-pill pull-xs-right\">\r\n                        {category.name}\r\n                    </Link>\r\n                </li>\r\n            )}\r\n\r\n            {subs && (\r\n                <li className=\"list-group-item\">\r\n                    Sub Categories{\" \"}\r\n                    {subs.map((s) => (\r\n                        <Link key={s._id} to={`/sub/${s.slug}`} className=\"label label-default label-pill pull-xs-right\">\r\n                            {s.name}\r\n                        </Link>\r\n                    ))}\r\n                </li>\r\n            )}\r\n\r\n            <li className=\"list-group-item\">\r\n                Shipping{\" \"}\r\n                <span className=\"label label-default label-pill pull-xs-right\">\r\n                    {shipping}\r\n                </span>\r\n            </li>\r\n\r\n            <li className=\"list-group-item\">\r\n                color{\" \"}\r\n                <span className=\"label label-default label-pill pull-xs-right\">\r\n                    {color}\r\n                </span>\r\n            </li>\r\n\r\n            <li className=\"list-group-item\">\r\n                Brand{\" \"}\r\n                <span className=\"label label-default label-pill pull-xs-right\">\r\n                    {brand}\r\n                </span>\r\n            </li>\r\n\r\n            <li className=\"list-group-item\">\r\n                Available{\" \"}\r\n                <span className=\"label label-default label-pill pull-xs-right\">\r\n                    {quantity}\r\n                </span>\r\n            </li>\r\n\r\n            <li className=\"list-group-item\">\r\n                Sold{\" \"}\r\n                <span className=\"label label-default label-pill pull-xs-right\">\r\n                    {sold}\r\n                </span>\r\n            </li>\r\n        </ul>\r\n    )\r\n}\r\n\r\nexport default ProductListItems","import React, { useState } from 'react'\r\nimport { Modal, Button } from 'antd'\r\nimport { toast } from 'react-toastify'\r\nimport { useSelector } from 'react-redux'\r\nimport { StarOutlined } from '@ant-design/icons'\r\nimport { useHistory, useParams } from 'react-router-dom'\r\n\r\nconst RatingModal = ({ children }) => {\r\n    const { user } = useSelector((state) => ({ ...state }))\r\n    const [modalVisible, setModalVisible] = useState(false)\r\n    const history = useHistory()\r\n    const { slug } = useParams()\r\n\r\n    const handleModal = () => {\r\n        if (user && user.token) {\r\n            setModalVisible(true)\r\n        } else {\r\n            history.push({\r\n                pathname: \"/login\",\r\n                state: { from: `/product/${slug}` }\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div onClick={handleModal}>\r\n                <StarOutlined className=\"text-danger\" /> <br /> {\" \"}\r\n                {user ? \"Leave Rating\" : \"Login to Leave Rating\"}\r\n            </div>\r\n            <Modal\r\n                title=\"Leave your rating\"\r\n                centered\r\n                visible={modalVisible}\r\n                onOk={() => {\r\n                    setModalVisible(false)\r\n                    toast.success(\"Thanks for your review.It will apper soon\")\r\n                }}\r\n                onCancel={() => setModalVisible(false)}\r\n            >\r\n                {children}\r\n            </Modal>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default RatingModal","import React, { useState } from 'react'\r\nimport { Card, Tabs, Tooltip } from 'antd'\r\nimport { Link, useHistory } from 'react-router-dom'\r\nimport { HeartOutlined, ShoppingCartOutlined } from '@ant-design/icons'\r\nimport 'react-responsive-carousel/lib/styles/carousel.min.css'\r\nimport { Carousel } from 'react-responsive-carousel'\r\nimport Laptop from '../../images/laptop.png'\r\nimport ProductListItems from './ProductListItem'\r\nimport StarRating from 'react-star-ratings'\r\nimport RatingModal from '../modal/RatingModal'\r\nimport { showAverage } from '../../functions/rating'\r\nimport _ from 'lodash'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { addToWishlist } from '../../functions/user'\r\nimport { toast } from 'react-toastify'\r\n\r\nconst { TabPane } = Tabs\r\n\r\nconst SingleProduct = ({ product, onStarClick, star }) => {\r\n    const [tooltip, setTooltip] = useState(\"Click to add\")\r\n\r\n    const { user, cart } = useSelector((state) => ({ ...state }))\r\n    const dispatch = useDispatch()\r\n\r\n    let history = useHistory()\r\n\r\n    const handleAddToCart = () => {\r\n        let cart = []\r\n        if (typeof window !== \"undefined\") {\r\n            if (localStorage.getItem(\"cart\")) {\r\n                cart = JSON.parse(localStorage.getItem(\"cart\"))\r\n            }\r\n\r\n            cart.push({\r\n                ...product,\r\n                count: 1\r\n            })\r\n\r\n            let unique = _.uniqWith(cart, _.isEqual)\r\n            localStorage.setItem(\"cart\", JSON.stringify(unique))\r\n            setTooltip(\"Added\")\r\n\r\n            dispatch({\r\n                type: \"ADD_TO_CART\",\r\n                payload: unique\r\n            })\r\n\r\n            dispatch({\r\n                type: \"SET_VISIBLE\",\r\n                payload: true\r\n            })\r\n        }\r\n    }\r\n\r\n    const { title, images, description, _id } = product\r\n\r\n    const handleAddToWishlist = (e) => {\r\n        e.preventDefault()\r\n        addToWishlist(product._id, user.token).then((res) => {\r\n            toast.success(\"Added to wishlist\")\r\n            history.push('/user/wishlist')\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-7\">\r\n                    {images && images.length ? (\r\n                        <Carousel showArrows={true} autoPlay infiniteLoop>\r\n                            {images && images.map((i) => <img src={i.url} key={i.public_id} />)}\r\n                        </Carousel>\r\n                    ) : (\r\n                            <Card cover={<img src={Laptop} className=\"mb-3 card-image\" />}></Card>\r\n                        )}\r\n\r\n                    <Tabs type=\"card\">\r\n                        <TabPane tab=\"Description\" key=\"1\">\r\n                            {description && description}\r\n                        </TabPane>\r\n                        <TabPane tab=\"More\" key=\"2\">\r\n                            Call use on xxxx xxxx xxxx to learn more about this product\r\n                    </TabPane>\r\n                    </Tabs>\r\n                </div>\r\n                <div className=\"col-md-5\">\r\n                    <h1 className=\"bg-info p-3\">{title}</h1>\r\n                    {product && product.ratings && product.ratings.length > 0\r\n                        ? (showAverage(product))\r\n                        : (<div className=\"text-center pt-1 pb-3\">No rating yet</div>)\r\n                    }\r\n                    <Card\r\n                        actions={[\r\n                            <Tooltip title={tooltip}>\r\n                                <a onClick={handleAddToCart}>\r\n                                    <ShoppingCartOutlined className=\"text-danger\" /> <br /> Add to cart\r\n                                </a>\r\n                            </Tooltip>,\r\n                            <a onClick={handleAddToWishlist}>\r\n                                <HeartOutlined className=\"text-info\" /> <br /> Add to Wishlist\r\n                            </a>,\r\n                            <RatingModal>\r\n                                <StarRating\r\n                                    name={_id}\r\n                                    numberOfStars={5}\r\n                                    rating={star}\r\n                                    changeRating={onStarClick}\r\n                                    isSelectable={true}\r\n                                    starRatedColor=\"red\"\r\n                                />\r\n                            </RatingModal>\r\n                        ]}\r\n                    >\r\n                        <ProductListItems product={product} />\r\n                    </Card>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SingleProduct","import React, { useState, useEffect } from 'react'\r\nimport { getProduct, productStar, getRelated } from '../functions/product'\r\nimport SingleProduct from '../components/cards/SingleProduct'\r\nimport { useSelector } from 'react-redux'\r\nimport ProductCard from '../components/cards/ProductCard'\r\n\r\nconst Product = ({ match }) => {\r\n    const [product, setProduct] = useState({})\r\n    const [related, setRelated] = useState([])\r\n    const [star, setStar] = useState(0)\r\n\r\n    const { user } = useSelector((state) => ({ ...state }))\r\n    const { slug } = match.params\r\n\r\n    useEffect(() => {\r\n        loadSingleProduct()\r\n    }, [slug])\r\n\r\n    useEffect(() => {\r\n        if (product.ratings && user) {\r\n            let existingRatingObject = product.ratings.find((ele) => ele.postedBy.toString() === user._id.toString())\r\n            existingRatingObject && setStar(existingRatingObject.star)\r\n        }\r\n    }, [])\r\n\r\n    const loadSingleProduct = () => {\r\n        getProduct(slug).then((res) => {\r\n            setProduct(res.data)\r\n            getRelated(res.data._id).then((res) => setRelated(res.data))\r\n        })\r\n    }\r\n\r\n    const onStarClick = (newRating, name) => {\r\n        setStar(newRating)\r\n        productStar(name, newRating, user.token).then((res) => {\r\n            loadSingleProduct()\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row pt-4\">\r\n                <SingleProduct product={product} onStarClick={onStarClick} star={star} />\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className=\"col text-center pt-5 pb-5\">\r\n                    <hr />\r\n                    <div>Related Products</div>\r\n                    <hr />\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"row pb-5\">\r\n                {related.length\r\n                    ? related.map((r) => (\r\n                        <div key={r._id} className=\"col-md-4\">\r\n                            <ProductCard product={r} />\r\n                        </div>\r\n                    )) : (<div className=\"text-center col\">No product found</div>\r\n                    )}\r\n            </div>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Product","import React, {useState, useEffect} from 'react'\r\nimport { getCategory } from '../../functions/category'\r\nimport { Link } from 'react-router-dom'\r\nimport ProductCard from '../../components/cards/ProductCard'\r\nimport CategoryList from '../../components/category/CategoryList'\r\n\r\nconst CategoryHome = ({match}) => {\r\n    const [category, setCategory] = useState({})\r\n    const [products, setProducts] = useState([])\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const {slug} = match.params\r\n\r\n    useEffect(() => {\r\n        setLoading(true)\r\n        getCategory(slug).then((res) => {\r\n            setCategory(res.data.category)\r\n            setProducts(res.data.products)\r\n            setLoading(false)\r\n        })\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"row\">\r\n                <div className=\"col\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-center p-3 mt-5 display-4 jumbotron\">\r\n                            Loading...\r\n                        </h4>\r\n                    ):(\r\n                        <h4 className=\"text-center p-3 mt-5 display-4 jumbotron\">\r\n                            {products.length} Products in \"{category.name}\" category\r\n                        </h4>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            <div className=\"row\">\r\n                {products.map((p) => (\r\n                    <div className=\"col\" key={p._id}>\r\n                        <ProductCard product={p} />\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CategoryHome","import React, {useState, useEffect} from 'react'\r\nimport { getSub } from '../../functions/sub'\r\nimport ProductCard from '../../components/cards/ProductCard'\r\n\r\nconst SubHome = ({match}) => {\r\n    const [sub, setSub] = useState({})\r\n    const [products, setProducts] = useState([])\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const {slug} = match.params\r\n\r\n    useEffect(() => {\r\n        setLoading(true)\r\n        getSub(slug).then((res) => {\r\n            setSub(res.data.sub)\r\n            setProducts(res.data.products)\r\n            setLoading(false)\r\n        })\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"row\">\r\n                <div className=\"col\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-center p-3 mt-5 display-4 jumbotron\">\r\n                            Loading...\r\n                        </h4>\r\n                    ):(\r\n                        <h4 className=\"text-center p-3 mt-5 display-4 jumbotron\">\r\n                            {products.length} Products in \"{sub.name}\" sub category\r\n                        </h4>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            <div className=\"row\">\r\n                {products.map((p) => (\r\n                    <div className=\"col\" key={p._id}>\r\n                        <ProductCard product={p} />\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default SubHome","import React from 'react'\r\nimport StarRating from 'react-star-ratings'\r\n\r\nconst Star = ({ starClick, numberOfStars }) => (\r\n    <div>\r\n        <StarRating\r\n            changeRating={() => starClick(numberOfStars)}\r\n            numberOfStars={numberOfStars}\r\n            starDimension=\"20px\"\r\n            starSpacing=\"2px\"\r\n            starHoverColor=\"red\"\r\n            starEmptyColor=\"red\"\r\n        />\r\n        <br />\r\n    </div>\r\n)\r\n\r\nexport default Star","import React, { useState, useEffect } from 'react'\r\nimport { fetchProductsByFilter, getProductByCount } from '../functions/product'\r\nimport { getCategories } from '../functions/category'\r\nimport { getSubs } from '../functions/sub'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport ProductCard from '../components/cards/ProductCard'\r\nimport { Menu, Slider, Checkbox, Radio } from 'antd'\r\nimport { DollarOutlined, DownSquareOutlined, StarOutlined, TagOutlined } from '@ant-design/icons'\r\nimport Star from '../components/forms/Star'\r\n\r\nconst { SubMenu, ItemGroup } = Menu\r\n\r\nconst Shop = () => {\r\n    const [products, setProducts] = useState([])\r\n    const [loading, setLoading] = useState(false)\r\n    const [price, setPrice] = useState([0, 0])\r\n    const [ok, setOk] = useState(false)\r\n    const [categories, setCategories] = useState([])\r\n    const [categoryIds, setCategoryIds] = useState([])\r\n    const [star, setStar] = useState('')\r\n    const [subs, setSubs] = useState([])\r\n    const [sub, setSub] = useState('')\r\n    const [brands, setBrands] = useState([\r\n        \"Apple\",\r\n        \"Samsung\",\r\n        \"Microsoft\",\r\n        \"Lenovo\",\r\n        \"ASUS\"\r\n    ])\r\n    const [brand, setBrand] = useState('')\r\n    const [colors, setColors] = useState([\r\n        \"Black\",\r\n        \"Brown\",\r\n        \"Silver\",\r\n        \"White\",\r\n        \"Blue\"\r\n    ])\r\n    const [color, setColor] = useState('')\r\n    const [shipping, setShipping] = useState(\"\")\r\n\r\n    let dispatch = useDispatch()\r\n    let { search } = useSelector((state) => ({ ...state }))\r\n    const { text } = search\r\n\r\n    useEffect(() => {\r\n        loadAllProducts()\r\n        getCategories().then((res) => setCategories(res.data))\r\n        getSubs().then((res) => setSubs(res.data))\r\n    }, [])\r\n\r\n    const loadAllProducts = () => {\r\n        getProductByCount(12).then((p) => {\r\n            setProducts(p.data)\r\n            setLoading(false)\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        const delayed = setTimeout(() => {\r\n            fetchProducts({ query: text })\r\n            if (!text) {\r\n                loadAllProducts()\r\n            }\r\n        }, 300)\r\n        return () => clearTimeout(delayed)\r\n    }, [text])\r\n\r\n    const fetchProducts = (arg) => {\r\n        fetchProductsByFilter(arg).then((res) => {\r\n            setProducts(res.data)\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchProducts({ price })\r\n    }, [ok])\r\n\r\n    const handleSlider = (value) => {\r\n        dispatch({\r\n            type: \"SEARCH_QUERY\",\r\n            payload: { text: \"\" }\r\n        })\r\n        setCategoryIds([])\r\n        setPrice(value)\r\n        setStar(\"\")\r\n        setSub('')\r\n        setBrand(\"\")\r\n        setColor(\"\")\r\n        setShipping(\"\")\r\n        setTimeout(() => {\r\n            setOk(!ok)\r\n        }, 300)\r\n    }\r\n\r\n    const showCategories = () =>\r\n        categories.map((c) => (\r\n            <div key={c._id}>\r\n                <Checkbox\r\n                    onChange={handleCheck}\r\n                    className=\"pb-2 pl-4 pr-4\"\r\n                    value={c._id}\r\n                    name=\"category\"\r\n                    checked={categoryIds.includes(c._id)}\r\n                >\r\n                    {c.name}\r\n                </Checkbox>\r\n            </div>\r\n        ))\r\n\r\n\r\n    const handleCheck = (e) => {\r\n        dispatch({\r\n            type: \"SEARCH_QUERY\",\r\n            payload: { text: \"\" }\r\n        })\r\n        setPrice([0, 0])\r\n        setStar(\"\")\r\n        setSub('')\r\n        setBrand(\"\")\r\n        setColor(\"\")\r\n        setShipping(\"\")\r\n\r\n        let inTheState = [...categoryIds]\r\n        let justChecked = e.target.value\r\n        let foundInTheState = inTheState.indexOf(justChecked)\r\n\r\n        if (foundInTheState === -1) {\r\n            inTheState.push(justChecked)\r\n        } else {\r\n            inTheState.splice(foundInTheState, 1)\r\n        }\r\n\r\n        setCategoryIds(inTheState)\r\n        fetchProducts({ category: inTheState })\r\n    }\r\n\r\n    const handleStarClick = (num) => {\r\n        dispatch({\r\n            type: \"SEARCH_QUERY\",\r\n            payload: { text: \"\" }\r\n        })\r\n        setPrice([0, 0])\r\n        setCategoryIds([])\r\n        setStar(num)\r\n        setSub('')\r\n        setBrand(\"\")\r\n        setColor(\"\")\r\n        setShipping(\"\")\r\n        fetchProducts({ stars: num })\r\n    }\r\n\r\n    const showStars = () => (\r\n        <div className=\"pr-4 pl-4 pb-2\">\r\n            <Star starClick={handleStarClick} numberOfStars={5} />\r\n            <Star starClick={handleStarClick} numberOfStars={4} />\r\n            <Star starClick={handleStarClick} numberOfStars={3} />\r\n            <Star starClick={handleStarClick} numberOfStars={2} />\r\n            <Star starClick={handleStarClick} numberOfStars={1} />\r\n        </div>\r\n    )\r\n\r\n    const showSubs = () =>\r\n        subs.map((s) => (\r\n            <div\r\n                key={s._id}\r\n                onClick={() => handleSub(s)}\r\n                className=\"p-1 m-1 badge badge-secondary\"\r\n                style={{ cursor: \"pointer\" }}\r\n            >\r\n                {s.name}\r\n            </div>\r\n        ))\r\n\r\n    const handleSub = (sub) => {\r\n        setSub(sub)\r\n        dispatch({\r\n            type: \"SEARCH_QUERY\",\r\n            payload: { text: \"\" }\r\n        })\r\n        setPrice([0, 0])\r\n        setCategoryIds([])\r\n        setStar(\"\")\r\n        setBrand(\"\")\r\n        setColor(\"\")\r\n        setShipping(\"\")\r\n        fetchProducts({ sub })\r\n    }\r\n\r\n    const showBrands = () =>\r\n        brands.map((b) => (\r\n            <Radio\r\n                value={b}\r\n                name={b}\r\n                checked={b === brand}\r\n                onChange={handleBrand}\r\n                className=\"pb-1 pl-4 pr-4\"\r\n            >\r\n                {b}\r\n            </Radio>\r\n        ))\r\n\r\n\r\n    const handleBrand = (e) => {\r\n        setSub(\"\")\r\n        dispatch({\r\n            type: \"SEARCH_QUERY\",\r\n            payload: { text: \"\" }\r\n        })\r\n        setPrice([0, 0])\r\n        setCategoryIds([])\r\n        setStar(\"\")\r\n        setColor(\"\")\r\n        setShipping(\"\")\r\n        setBrand(e.target.value)\r\n        fetchProducts({ brand: e.target.value })\r\n    }\r\n\r\n    const showColors = () =>\r\n        colors.map((c) => (\r\n            <Radio\r\n                value={c}\r\n                name={c}\r\n                checked={c === color}\r\n                onChange={handleColor}\r\n                className=\"pb-1 pl-4 pr-4\"\r\n            >\r\n                {c}\r\n            </Radio>\r\n        ))\r\n\r\n    const handleColor = (e) => {\r\n        setSub(\"\")\r\n        dispatch({\r\n            type: \"SEARCH_QUERY\",\r\n            payload: { text: \"\" }\r\n        })\r\n        setPrice([0, 0])\r\n        setCategoryIds([])\r\n        setStar(\"\")\r\n        setBrand(\"\")\r\n        setShipping(\"\")\r\n        setColor(e.target.value)\r\n        fetchProducts({ color: e.target.value })\r\n    }\r\n\r\n    const showShipping = () => (\r\n        <div>\r\n            <Checkbox\r\n                className=\"pb-2 pl-4 pr-4\"\r\n                onChange={handleShippingChange}\r\n                value=\"Yes\"\r\n                checked={shipping === \"Yes\"}\r\n            >\r\n                Yes\r\n            </Checkbox>\r\n\r\n            <Checkbox\r\n                className=\"pb-2 pl-4 pr-4\"\r\n                onChange={handleShippingChange}\r\n                value=\"No\"\r\n                checked={shipping === \"No\"}\r\n            >\r\n                No\r\n            </Checkbox>\r\n        </div>\r\n    )\r\n\r\n    const handleShippingChange = (e) => {\r\n        setSub(\"\")\r\n        dispatch({\r\n            type: \"SEARCH_QUERY\",\r\n            payload: { text: \"\" }\r\n        })\r\n        setPrice([0, 0])\r\n        setCategoryIds([])\r\n        setStar(\"\")\r\n        setBrand(\"\")\r\n        setColor(\"\")\r\n        setShipping(e.target.value)\r\n        fetchProducts({ shipping: e.target.value })\r\n    }\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-3 pt-2\">\r\n                    <h4>Search/Filter</h4>\r\n                    <hr />\r\n\r\n                    <Menu defaultOpenKeys={[\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\"]} mode=\"inline\">\r\n                        <SubMenu key=\"1\" title={\r\n                            <span className=\"h6\">\r\n                                <DollarOutlined />Price\r\n                            </span>\r\n                        }>\r\n                            <div>\r\n                                <Slider\r\n                                    className=\"ml-4 mr-4\"\r\n                                    tipFormatter={(v) => `$${v}`}\r\n                                    range\r\n                                    value={price}\r\n                                    onChange={handleSlider}\r\n                                    max=\"44999\"\r\n                                />\r\n                            </div>\r\n                        </SubMenu>\r\n\r\n                        <SubMenu key=\"2\" title={\r\n                            <span className=\"h6\">\r\n                                <DownSquareOutlined />Categories\r\n                            </span>\r\n                        }>\r\n                            <div style={{ marginTop: \"-10px\" }}>\r\n                                {showCategories()}\r\n                            </div>\r\n                        </SubMenu>\r\n\r\n                        <SubMenu key=\"3\" title={\r\n                            <span className=\"h6\">\r\n                                <StarOutlined />Rating\r\n                            </span>\r\n                        }>\r\n                            <div style={{ marginTop: \"-10px\" }}>\r\n                                {showStars()}\r\n                            </div>\r\n                        </SubMenu>\r\n\r\n                        <SubMenu key=\"4\" title={\r\n                            <span className=\"h6\">\r\n                                <TagOutlined />Sub Categories\r\n                            </span>\r\n                        }>\r\n                            <div style={{ marginTop: \"-10px\" }} className=\"pl-4 pr-4\">\r\n                                {showSubs()}\r\n                            </div>\r\n                        </SubMenu>\r\n\r\n                        <SubMenu key=\"5\" title={\r\n                            <span className=\"h6\">\r\n                                <TagOutlined />Brands\r\n                            </span>\r\n                        }>\r\n                            <div style={{ marginTop: \"-10px\" }} className=\"pr-5\">\r\n                                {showBrands()}\r\n                            </div>\r\n                        </SubMenu>\r\n\r\n                        <SubMenu key=\"6\" title={\r\n                            <span className=\"h6\">\r\n                                <TagOutlined />Colors\r\n                            </span>\r\n                        }>\r\n                            <div style={{ marginTop: \"-10px\" }} className=\"pr-5\">\r\n                                {showColors()}\r\n                            </div>\r\n                        </SubMenu>\r\n\r\n                        <SubMenu key=\"7\" title={\r\n                            <span className=\"h6\">\r\n                                <TagOutlined />Shipping\r\n                            </span>\r\n                        }>\r\n                            <div style={{ marginTop: \"-10px\" }} className=\"pr-5\">\r\n                                {showShipping()}\r\n                            </div>\r\n                        </SubMenu>\r\n                    </Menu>\r\n                </div>\r\n                <div className=\"col-md-9 pt-2\">\r\n                    {loading ? (\r\n                        <h4 className=\"text-danger\">Loading...</h4>\r\n                    ) : (\r\n                            <h4 className=\"text-danger\">Products</h4>\r\n                        )}\r\n\r\n                    {products.length < 1 && <p>No products found</p>}\r\n\r\n                    <div className=\"row pb-5\">\r\n                        {products.map((p) => (\r\n                            <div key={p._id} className=\"col-md-4 mt-3\">\r\n                                <ProductCard product={p} />\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Shop","import React from 'react'\r\nimport ModalImage from 'react-modal-image'\r\nimport laptop from '../../images/laptop.png'\r\nimport { useDispatch } from 'react-redux'\r\nimport { toast } from 'react-toastify'\r\nimport { CheckCircleOutlined, CloseCircleOutlined, CloseOutlined } from '@ant-design/icons'\r\n\r\nconst ProductCardInCheckout = ({ p }) => {\r\n    const colors = [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"]\r\n    let dispatch = useDispatch()\r\n\r\n    const handleColorChange = (e) => {\r\n        let cart = []\r\n        if (typeof window !== \"undefined\") {\r\n            if (localStorage.getItem(\"cart\")) {\r\n                cart = JSON.parse(localStorage.getItem(\"cart\"))\r\n            }\r\n\r\n            cart.map((product, i) => {\r\n                if (product._id === p._id) {\r\n                    cart[i].color = e.target.value\r\n                }\r\n            })\r\n\r\n            localStorage.setItem(\"cart\", JSON.stringify(cart))\r\n            dispatch({\r\n                type: \"ADD_TO_CART\",\r\n                payload: cart\r\n            })\r\n        }\r\n    }\r\n\r\n    const handleQuantityChange = (e) => {\r\n        let count = e.target.value < 1 ? 1 : e.target.value\r\n        if (count > p.quantity) {\r\n            toast.error(`Max available quantity: ${p.quantity}`)\r\n            return\r\n        }\r\n\r\n        let cart = []\r\n\r\n        if (typeof window !== \"undefined\") {\r\n            if (localStorage.getItem(\"cart\")) {\r\n                cart = JSON.parse(localStorage.getItem(\"cart\"))\r\n            }\r\n\r\n            cart.map((product, i) => {\r\n                if (product._id == p._id) {\r\n                    cart[i].count = count\r\n                }\r\n            })\r\n\r\n            localStorage.setItem(\"cart\", JSON.stringify(cart))\r\n            dispatch({\r\n                type: \"ADD_TO_CART\",\r\n                payload: cart\r\n            })\r\n        }\r\n    }\r\n\r\n    const handleRemove = () => {\r\n        let cart = []\r\n\r\n        if (typeof window !== \"undefined\") {\r\n            if (localStorage.getItem(\"cart\")) {\r\n                cart = JSON.parse(localStorage.getItem(\"cart\"))\r\n            }\r\n\r\n            cart.map((product, i) => {\r\n                if (product._id == p._id) {\r\n                    cart.splice(i, 1)\r\n                }\r\n            })\r\n\r\n            localStorage.setItem(\"cart\", JSON.stringify(cart))\r\n            dispatch({\r\n                type: \"ADD_TO_CART\",\r\n                payload: cart\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <tbody>\r\n            <tr>\r\n                <td>\r\n                    <div style={{ width: \"100px\", height: \"auto\" }}>\r\n                        {p.images.length ? (\r\n                            <ModalImage small={p.images[0].url} large={p.images[0].url} />\r\n                        ) : (\r\n                                <ModalImage small={laptop} large={laptop} />\r\n                            )}\r\n                    </div>\r\n                </td>\r\n                <td>{p.title}</td>\r\n                <td>{p.price}</td>\r\n                <td>{p.brand}</td>\r\n                <td>\r\n                    <select\r\n                        onChange={handleColorChange}\r\n                        name=\"color\"\r\n                        className=\"form-control\"\r\n                    >\r\n                        {p.color ? (<option>{p.color}</option>) : (<option>Select</option>)}\r\n                        {colors.filter((c) => c !== p.color).map((c) => (\r\n                            <option key={c} value={c}>\r\n                                {c}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n                </td>\r\n                <td className=\"text-center\">\r\n                    <input\r\n                        type=\"number\"\r\n                        className=\"form-control\"\r\n                        value={p.count}\r\n                        onChange={handleQuantityChange}\r\n                    />\r\n                </td>\r\n                <td className=\"text-center\">\r\n                    {p.shipping === \"Yes\" ? (\r\n                        <CheckCircleOutlined className=\"text-success\" />\r\n                    ) : (\r\n                            <CloseCircleOutlined className=\"text-danger\" />\r\n                        )}\r\n                </td>\r\n                <td className=\"text-center\">\r\n                    <CloseOutlined\r\n                        onClick={handleRemove}\r\n                        className=\"text-danger pointer\"\r\n                    />\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    )\r\n}\r\n\r\nexport default ProductCardInCheckout","import React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport ProductCardInCheckout from '../components/cards/ProductCardInCheckout'\r\nimport { userCart } from '../functions/user'\r\n\r\nconst Cart = ({ history }) => {\r\n    const { user, cart } = useSelector((state) => ({ ...state }))\r\n    const dispatch = useDispatch()\r\n\r\n    const getTotal = () => {\r\n        return cart.reduce((currentValue, nextValue) => {\r\n            return currentValue + nextValue.count * nextValue.price\r\n        }, 0)\r\n    }\r\n\r\n    const saveOrderToDb = () => {\r\n        userCart(cart, user.token).then((res) => {\r\n            if (res.data.ok)\r\n                history.push('/checkout')\r\n        }).catch((err) => console.log(\"cart save err\", err))\r\n    }\r\n\r\n    const saveCashOrderToDb = () => {\r\n        dispatch({\r\n            type: \"COD\",\r\n            payload: true\r\n        })\r\n        userCart(cart, user.token).then((res) => {\r\n            if (res.data.ok)\r\n                history.push('/checkout')\r\n        }).catch((err) => console.log(\"cart save err\", err))\r\n    }\r\n\r\n    const showCartItems = () => (\r\n        <table className=\"table table-bordered\">\r\n            <thead className=\"thead-light\">\r\n                <tr>\r\n                    <th scope=\"col\">Image</th>\r\n                    <th scope=\"col\">Title</th>\r\n                    <th scope=\"col\">Price</th>\r\n                    <th scope=\"col\">Brand</th>\r\n                    <th scope=\"col\">Color</th>\r\n                    <th scope=\"col\">Count</th>\r\n                    <th scope=\"col\">Shipping</th>\r\n                    <th scope=\"col\">Remove</th>\r\n                </tr>\r\n            </thead>\r\n\r\n            {cart.map((p) => (\r\n                <ProductCardInCheckout key={p._id} p={p} />\r\n            ))}\r\n        </table>\r\n    )\r\n\r\n    return (\r\n        <div className=\"container-fluid pt-2\">\r\n            <div className=\"row\">\r\n                <div className=\"col-md-8\">\r\n                    <h4>Cart /{cart.length} Product</h4>\r\n                    {!cart.length ? (\r\n                        <p>\r\n                            No products in cart. <Link to=\"/shop\">Continue Shopping..</Link>\r\n                        </p>\r\n                    ) : (\r\n                            showCartItems()\r\n                        )}\r\n                </div>\r\n                <div className=\"col-md-4\">\r\n                    <h4>Order Summary</h4>\r\n                    <hr />\r\n                    <p>Products</p>\r\n                    {cart.map((c, i) => (\r\n                        <div key={i}>\r\n                            <p>\r\n                                {c.title} x {c.count} = ${c.price * c.count}\r\n                            </p>\r\n                        </div>\r\n                    ))}\r\n                    <hr />\r\n                    Total: <b>${getTotal()}</b>\r\n                    <hr />\r\n                    {user ? (\r\n                        <div>\r\n                            <button onClick={saveOrderToDb} className=\"btn btn-sm btn-primary mt-2\" disabled={!cart.length}>\r\n                                Proceed to Checkout\r\n                            </button>\r\n                            <br />\r\n                            <button onClick={saveCashOrderToDb} className=\"btn btn-sm btn-warning mt-2\" disabled={!cart.length}>\r\n                                Pay Cash on Delivery\r\n                            </button>\r\n                        </div>\r\n                    ) : (\r\n                            <button className=\"btn btn-sm btn-primary mt-2\">\r\n                                <Link to={{\r\n                                    pathname: \"/login\",\r\n                                    state: { from: \"cart\" }\r\n                                }}>\r\n                                    Login to Checkout\r\n                                </Link>\r\n                            </button>\r\n                        )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Cart","import React, { useState, useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { getUserCart, emptyUserCart, saveUserAddress, applyCoupon, createCashOrderForUser } from '../functions/user'\r\nimport { toast } from 'react-toastify'\r\nimport ReactQuill from 'react-quill'\r\nimport 'react-quill/dist/quill.snow.css'\r\n\r\nconst Checkout = ({ history }) => {\r\n    const [products, setProducts] = useState([])\r\n    const [total, setTotal] = useState(0)\r\n    const [address, setAddress] = useState(\"\")\r\n    const [addressSaved, setAddressSaved] = useState(false)\r\n    const [coupon, setCoupon] = useState(\"\")\r\n    const [totalAfterDiscount, setTotalAfterDiscount] = useState(0)\r\n    const [discountError, setDiscountError] = useState(\"\")\r\n\r\n    const dispatch = useDispatch()\r\n    const { user, COD } = useSelector((state) => ({ ...state }))\r\n    const couponTrueOrFalse = useSelector((state) => ({ ...state }))\r\n\r\n    useEffect(() => {\r\n        getUserCart(user.token).then((res) => {\r\n            setProducts(res.data.products)\r\n            setTotal(res.data.cartTotal)\r\n        })\r\n    }, [])\r\n\r\n    const emptyCart = () => {\r\n        if (typeof window !== \"undefined\") {\r\n            localStorage.removeItem(\"cart\")\r\n        }\r\n\r\n        dispatch({\r\n            type: \"ADD_TO_CART\",\r\n            payload: []\r\n        })\r\n\r\n        emptyUserCart(user.token).then((res) => {\r\n            setProducts([])\r\n            setTotal(0)\r\n            setTotalAfterDiscount(0)\r\n            setCoupon(\"\")\r\n            toast.success(\"Cart is empty. Continue shopping\")\r\n        })\r\n    }\r\n\r\n    const saveAddressToDb = () => {\r\n        saveUserAddress(user.token, address).then((res) => {\r\n            if (res.data.ok) {\r\n                setAddressSaved(true)\r\n                toast.success(\"Address Saved\")\r\n            }\r\n        })\r\n    }\r\n\r\n    const applyDiscountCoupon = () => {\r\n        applyCoupon(user.token, coupon).then((res) => {\r\n            if (res.data) {\r\n                setTotalAfterDiscount(res.data)\r\n                dispatch({\r\n                    type: \"COUPON_APPLIED\",\r\n                    payload: true\r\n                })\r\n            }\r\n\r\n            if (res.data.err) {\r\n                setDiscountError(res.data.err)\r\n                dispatch({\r\n                    type: \"COUPON_APPLIED\",\r\n                    payload: false\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    const showAddress = () => (\r\n        <div>\r\n            <ReactQuill theme=\"snow\" value={address} onChange={setAddress} />\r\n            <button className=\"btn btn-primary mt-2\" onClick={saveAddressToDb}>\r\n                Save\r\n            </button>\r\n        </div>\r\n    )\r\n\r\n    const showProductSummary = () => {\r\n        products.map((p, i) => (\r\n            <div key={i}>\r\n                <p>\r\n                    {p.product.title} ({p.color}) x {p.count}={\" \"}\r\n                    {p.product.price * p.count}\r\n                </p>\r\n            </div>\r\n        ))\r\n    }\r\n\r\n    const showApplyCoupon = () => (\r\n        <div>\r\n            <input\r\n                onChange={(e) => {\r\n                    setCoupon(e.target.value)\r\n                    setDiscountError(\"\")\r\n                }}\r\n                value={coupon}\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n            />\r\n            <button onClick={applyDiscountCoupon} className=\"btn btn-primary mt-2\">Apply</button>\r\n        </div>\r\n    )\r\n\r\n    const createCashOrder = () => {\r\n        createCashOrderForUser(user.token, COD, couponTrueOrFalse).then((res) => {\r\n            if (res.data.ok) {\r\n                if (typeof window !== \"undefined\") localStorage.removeItem(\"cart\")\r\n\r\n                dispatch({\r\n                    type: \"ADD_TO_CART\",\r\n                    payload: []\r\n                })\r\n\r\n                dispatch({\r\n                    type: \"COUPON_APPLIED\",\r\n                    payload: false\r\n                })\r\n\r\n                dispatch({\r\n                    type: \"COD\",\r\n                    payload: false\r\n                })\r\n\r\n                emptyUserCart(user.token)\r\n                setTimeout(() => {\r\n                    history.push(\"/user/history\")\r\n                }, 1000)\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"col-md-6\">\r\n                <h4>Delivery Address</h4>\r\n                <br />\r\n                <br />\r\n                {showAddress()}\r\n                <hr />\r\n                <h4>Got Coupon?</h4>\r\n                <br />\r\n                {showApplyCoupon()}\r\n                <br />\r\n                {discountError && <p className=\"bg-danger p-2\">{discountError}</p>}\r\n            </div>\r\n            <div className=\"col-md-6\">\r\n                <h4>Order Summary</h4>\r\n                <hr />\r\n                <p>Products {products.length}</p>\r\n                <hr />\r\n                {showProductSummary()}\r\n                <hr />\r\n                <p>Cart Total: {total}</p>\r\n                {totalAfterDiscount > 0 && (\r\n                    <p className=\"bg-success p-2\">\r\n                        Discount Applied: Total Payable: ${totalAfterDiscount}\r\n                    </p>\r\n                )}\r\n\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-6\">\r\n                        {COD ? (\r\n                            <button\r\n                                className=\"btn btn-primary\"\r\n                                disabled={!addressSaved || !products.length}\r\n                                onClick={createCashOrder}\r\n                            >\r\n                                Place Order\r\n                            </button>\r\n                        ) : (\r\n                                <button\r\n                                    className=\"btn btn-primary\"\r\n                                    disabled={!addressSaved || !products.length}\r\n                                    onClick={() => history.push('/payment')}\r\n                                >\r\n                                    Place Order\r\n                                </button>\r\n                            )}\r\n                    </div>\r\n\r\n                    <div className=\"col-md-6\">\r\n                        <button onClick={emptyCart} disabled={!products.length} className=\"btn btn-primary\">Empty Cart</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Checkout","import axios from 'axios'\r\n\r\nexport const createPaymentIntent = async (authtoken, coupon) =>\r\n    await axios.post(`${process.env.REACT_APP_API}/create-payment-intent`, { couponApplied: coupon }, {\r\n        headers: {\r\n            authtoken\r\n        }\r\n    })","import React, { useEffect, useState } from 'react'\r\nimport { CardElement, useStripe, useElements } from '@stripe/react-stripe-js'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { createPaymentIntent } from '../functions/stripe'\r\nimport { Link } from 'react-router-dom'\r\nimport { Card } from 'antd'\r\nimport { DollarOutlined, CheckOutlined } from '@ant-design/icons'\r\nimport Laptop from '../images/laptop.png'\r\nimport { createOrder, emptyUserCart } from '../functions/user'\r\n\r\nconst StripeCheckout = ({ history }) => {\r\n    const dispatch = useDispatch()\r\n    const { user, coupon } = useSelector((state) => ({ ...state }))\r\n\r\n    const [succeeded, setSucceeded] = useState(false)\r\n    const [error, setError] = useState(null)\r\n    const [processing, setProcessing] = useState(\"\")\r\n    const [disabled, setDisabled] = useState(true)\r\n    const [clientSecret, setClientSecret] = useState(\"\")\r\n    const [cartTotal, setCartTotal] = useState(0)\r\n    const [totalAfterDiscount, setTotalAfterDiscount] = useState(0)\r\n    const [payable, setPayable] = useState(0)\r\n\r\n    const stripe = useStripe()\r\n    const elements = useElements()\r\n\r\n    useEffect(() => {\r\n        createPaymentIntent(user.token, coupon).then((res) => {\r\n            setClientSecret(res.data.clientSecret)\r\n            setCartTotal(res.data.cartTotal)\r\n            setTotalAfterDiscount(res.data.totalAfterDiscount)\r\n            setPayable(res.data.payable)\r\n        })\r\n    }, [])\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault()\r\n        setProcessing(true)\r\n\r\n        const payload = await stripe.confirmCardPayment(clientSecret, {\r\n            payment_method: {\r\n                card: elements.getElement(CardElement),\r\n                billing_details: {\r\n                    name: e.target.name.value\r\n                }\r\n            }\r\n        })\r\n\r\n        if (payload.error) {\r\n            setError(`Payment failed ${payload.error.message}`)\r\n            setProcessing(false)\r\n        } else {\r\n            createOrder(payload, user.token).then((res) => {\r\n                if (res.data.ok) {\r\n                    if (typeof window !== \"undefined\") localStorage.removeItem(\"cart\")\r\n\r\n                    dispatch({\r\n                        type: \"ADD_TO_CART\",\r\n                        payload: []\r\n                    })\r\n\r\n                    dispatch({\r\n                        type: \"COUPON_FAILED\",\r\n                        payload: false\r\n                    })\r\n                    emptyUserCart(user.token)\r\n                }\r\n            })\r\n\r\n            setError(null)\r\n            setProcessing(false)\r\n            setSucceeded(true)\r\n        }\r\n    }\r\n\r\n    const handleChange = (e) => {\r\n        setDisabled(e.empty)\r\n        setError(e.error ? e.error.message : \"\")\r\n    }\r\n\r\n    const cartStyle = {\r\n        style: {\r\n            base: {\r\n                color: \"#32325d\",\r\n                fontFamily: \"Arial, sans-serif\",\r\n                fontSmoothing: \"antialiased\",\r\n                fontSize: \"16px\",\r\n                \"::placeholder\": {\r\n                    color: \"#32325d\"\r\n                }\r\n            },\r\n            invalid: {\r\n                color: \"#fa755a\",\r\n                iconColor: \"#fa755a\"\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {!succeeded && (\r\n                <div>\r\n                    {coupon && totalAfterDiscount !== undefined ? (\r\n                        <p className=\"alert alert-success\">{`Total after discount: $${totalAfterDiscount}`}</p>\r\n                    ) : (\r\n                            <p className=\"alert alert-danger\">No coupon applied</p>\r\n                        )}\r\n                </div>\r\n            )}\r\n            <div className=\"text-center pb-5\">\r\n                <Card\r\n                    cover={\r\n                        <img\r\n                            src={Laptop}\r\n                            style={{\r\n                                height: \"200px\",\r\n                                objectFit: \"cover\",\r\n                                marginBottom: \"-50px\"\r\n                            }}\r\n                        />\r\n                    }\r\n                    actions={[\r\n                        <div>\r\n                            <DollarOutlined className=\"text-info\" /><br />Total: ${cartTotal}\r\n                        </div>,\r\n                        <div>\r\n                            <CheckOutlined className=\"text-info\" /><br />Total payable: ${(payable / 100).toFixed(2)}\r\n                        </div>\r\n                    ]}\r\n                />\r\n            </div>\r\n\r\n            <form id=\"payment-form\" className=\"stripe-form\" onSubmit={handleSubmit}>\r\n                <CardElement\r\n                    id=\"card-element\"\r\n                    options={cartStyle}\r\n                    onChange={handleChange}\r\n                />\r\n                <button className=\"stripe-button\" disabled={processing || disabled || succeeded}>\r\n                    <span id=\"button-text\">\r\n                        {processing ? <div className=\"spinner\" id=\"spinner\"></div> : \"Pay\"}\r\n                    </span>\r\n                </button>\r\n                <br />\r\n                {error && (\r\n                    <div className=\"card-error\" role=\"alert\">\r\n                        {error}\r\n                    </div>\r\n                )}\r\n                <br />\r\n                <p className={succeeded ? \"result-message\" : \"result-message hidden\"}>\r\n                    Payment Successful.\r\n                    <Link to=\"/user/history\">See it in your purchase history</Link>\r\n                </p>\r\n            </form>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default StripeCheckout","import React from 'react'\r\nimport { loadStripe } from '@stripe/stripe-js'\r\nimport { Elements } from '@stripe/react-stripe-js'\r\nimport StripeCheckout from '../components/StripeCheckout'\r\nimport '../stripe.css'\r\n\r\nconst promise = loadStripe(process.env.REACT_APP_STRIPE_KEY)\r\n\r\nconst Payment = () => {\r\n    return (\r\n        <div className=\"container p-5 text-center\">\r\n            <h4>Complete Your Purchases</h4>\r\n            <Elements stripe={promise}>\r\n                <div className=\"col-md-8 offset-md-2\">\r\n                    <StripeCheckout />\r\n                </div>\r\n            </Elements>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Payment","import React, { useEffect } from 'react'\nimport { Switch, Route } from 'react-router-dom'\nimport { ToastContainer } from 'react-toastify'\nimport \"react-toastify/dist/ReactToastify.css\"\n\nimport SideDrawer from './components/drawer/SideDrawer'\nimport Header from './components/nav/Header'\nimport UserRoute from './components/routes/UserRoute'\nimport AdminRoute from './components/routes/AdminRoute'\nimport Home from './pages/Home'\nimport Login from './pages/auth/Login'\nimport Register from './pages/auth/Register'\nimport RegisterComplete from './pages/auth/RegisterComplete'\nimport ForgotPassword from './pages/auth/ForgotPassword'\nimport History from './pages/user/History'\nimport Password from './pages/user/Password'\nimport Wishlist from './pages/user/Wishlist'\nimport AdminDashboard from './pages/admin/AdminDashboard'\nimport CategoryCreate from './pages/admin/category/CategoryCreate'\nimport CategoryUpdate from './pages/admin/category/CategoryUpdate'\nimport SubCreate from './pages/admin/sub/SubCreate'\nimport SubUpdate from './pages/admin/sub/SubUpdate'\nimport ProductCreate from './pages/admin/product/ProductCreate'\nimport AllProducts from './pages/admin/product/AllProducts'\nimport ProductUpdate from './pages/admin/product/ProductUpdate'\nimport CouponCreatePage from './pages/admin/coupon/CreateCouponPage'\nimport Product from './pages/Product'\nimport CategoryHome from './pages/category/CategoryHome'\nimport SubHome from './pages/sub/SubHome'\nimport Shop from './pages/Shop'\nimport Cart from './pages/Cart'\nimport Checkout from './pages/Checkout'\nimport Payment from './pages/Payment'\n\nimport { auth } from './firebase'\nimport { useDispatch } from 'react-redux'\nimport { currentUser } from './functions/auth'\n\nconst App = () => {\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    const unSubscribe = auth.onAuthStateChanged(async (user) => {\n      if (user) {\n        const idTokenResult = await user.getIdTokenResult()\n        currentUser(idTokenResult.token)\n          .then((res) => {\n            dispatch({\n              type: \"LOGGED_IN_USER\",\n              payload: {\n                name: res.data.name,\n                email: res.data.email,\n                token: idTokenResult.token,\n                role: res.data.role,\n                _id: res.data._id\n              }\n            })\n          })\n          .catch((err) => console.log(err))\n      }\n    })\n\n    return () => unSubscribe()\n  }, [dispatch])\n\n  return (\n    <div>\n      <Header />\n      <SideDrawer />\n      <ToastContainer />\n      <Switch>\n        <Route exact path=\"/\" component={Home} />\n        <Route exact path=\"/login\" component={Login} />\n        <Route exact path=\"/register\" component={Register} />\n        <Route exact path=\"/register/complete\" component={RegisterComplete} />\n        <Route exact path=\"/forgot/password\" component={ForgotPassword} />\n        <Route exact path=\"/product/:slug\" component={Product} />\n        <Route exact path=\"/category/:slug\" component={CategoryHome} />\n        <Route exact path=\"/sub/:slug\" component={SubHome} />\n        <Route exact path=\"/shop\" component={Shop} />\n        <Route exact path=\"/cart\" component={Cart} />\n        <UserRoute exact path=\"/user/history\" component={History} />\n        <UserRoute exact path=\"/user/password\" component={Password} />\n        <UserRoute exact path=\"/user/wishlist\" component={Wishlist} />\n        <UserRoute exact path=\"/checkout\" component={Checkout} />\n        <UserRoute exact path=\"/payment\" component={Payment} />\n        <AdminRoute exact path=\"/admin/dashboard\" component={AdminDashboard} />\n        <AdminRoute exact path=\"/admin/category\" component={CategoryCreate} />\n        <AdminRoute exact path=\"/admin/category/:slug\" component={CategoryUpdate} />\n        <AdminRoute exact path=\"/admin/sub\" component={SubCreate} />\n        <AdminRoute exact path=\"/admin/sub/:slug\" component={SubUpdate} />\n        <AdminRoute exact path=\"/admin/product\" component={ProductCreate} />\n        <AdminRoute exact path=\"/admin/products\" component={AllProducts} />\n        <AdminRoute exact path=\"/admin/product/:slug\" component={ProductUpdate} />\n        <AdminRoute exact path=\"/admin/coupon\" component={CouponCreatePage} />\n      </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","let initialState = []\r\n\r\nif (typeof window !== \"undefined\") {\r\n    if (localStorage.getItem(\"cart\")) {\r\n        initialState = JSON.parse(localStorage.getItem(\"cart\"))\r\n    } else {\r\n        initialState = []\r\n    }\r\n}\r\n\r\nexport const cartReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case \"ADD_TO_CART\":\r\n            return action.payload\r\n        default:\r\n            return state\r\n    }\r\n}","import { combineReducers } from 'redux'\r\nimport { userReducer } from \"./userReducer\"\r\nimport { searchReducer } from './searchReducer'\r\nimport { cartReducer } from './cartReducer'\r\nimport { drawerReducer } from './drawerReducer'\r\nimport { couponReducer } from './couponReducer'\r\nimport { CODReducer } from './CODReducer'\r\n\r\nconst rootReducer = combineReducers({\r\n    user: userReducer,\r\n    search: searchReducer,\r\n    cart: cartReducer,\r\n    drawer: drawerReducer,\r\n    coupon: couponReducer,\r\n    COD: CODReducer\r\n})\r\n\r\nexport default rootReducer","export const userReducer = (state = null, action) => {\r\n    switch (action.type) {\r\n        case \"LOGGED_IN_USER\":\r\n            return action.payload\r\n        case \"LOGOUT\":\r\n            return action.payload\r\n        default:\r\n            return state\r\n    }\r\n}","export const searchReducer = (state = { text: \"\" }, action) => {\r\n    switch (action.type) {\r\n        case \"SEARCH_QUERY\":\r\n            return { ...state, ...action.payload }\r\n        default:\r\n            return state\r\n    }\r\n}","export const drawerReducer = (state = { text: \"\" }, action) => {\r\n    switch (action.type) {\r\n        case \"SET_VISIBLE\":\r\n            return action.payload\r\n        default:\r\n            return state\r\n    }\r\n}","export const couponReducer = (state = false, action) => {\r\n    switch (action.type) {\r\n        case \"COUPON_APPLIED\":\r\n            return action.payload\r\n        default:\r\n            return state\r\n    }\r\n}","export const CODReducer = (state = false, action) => {\r\n    switch (action.type) {\r\n        case \"COD\":\r\n            return action.payload\r\n        default:\r\n            return state\r\n    }\r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { BrowserRouter } from 'react-router-dom'\nimport 'antd/dist/antd.css'\n\n\nimport { createStore } from 'redux'\nimport { Provider } from 'react-redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport rootReducer from './reducers'\n\n//store\nconst store = createStore(rootReducer, composeWithDevTools())\n\nReactDOM.render(\n  // <React.StrictMode>\n  <Provider store={store}>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </Provider>,\n  // </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}